{"version":3,"file":"Customizer.js","sourceRoot":"../src/","sources":["customizations/Customizer.tsx"],"names":[],"mappings":";;;IAQA;;;;;;;;;;;;;OAaG;IACH;QAAgC,sCAA+B;QAA/D;YAAA,qEA6BC;YA5BS,kBAAY,GAAG,CAAC,CAAC;YA2BjB,4BAAsB,GAAG,cAAM,OAAA,KAAI,CAAC,WAAW,EAAE,EAAlB,CAAkB,CAAC;;QAC5D,CAAC;QA1BQ,sCAAiB,GAAxB;YACE,+BAAc,CAAC,OAAO,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;QACtD,CAAC;QAEM,yCAAoB,GAA3B;YACE,+BAAc,CAAC,SAAS,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;QACxD,CAAC;QAEM,2BAAM,GAAb;YAAA,iBAeC;YAdS,IAAA,8CAAgB,CAAgB;YACxC,OAAO,CACL,oBAAC,qCAAiB,CAAC,QAAQ,QACxB,UAAC,aAAiC;gBACjC,IAAI,UAAU,GAAG,yCAAmB,CAAC,KAAI,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC;gBAEhE,IAAI,gBAAgB,EAAE;oBACpB,UAAU,GAAG,gBAAgB,CAAC,UAAU,CAAC,CAAC;iBAC3C;gBAED,OAAO,oBAAC,qCAAiB,CAAC,QAAQ,IAAC,KAAK,EAAE,UAAU,IAAG,KAAI,CAAC,KAAK,CAAC,QAAQ,CAA8B,CAAC;YAC3G,CAAC,CAC0B,CAC9B,CAAC;QACJ,CAAC;QAGH,iBAAC;IAAD,CAAC,AA7BD,CAAgC,6BAAa,GA6B5C;IA7BY,gCAAU","sourcesContent":["import * as React from 'react';\r\nimport { BaseComponent } from '../BaseComponent';\r\nimport { IBaseProps } from '../BaseComponent.types';\r\nimport { Customizations, ISettings, ISettingsFunction } from './Customizations';\r\nimport { CustomizerContext, ICustomizerContext } from './CustomizerContext';\r\nimport { mergeCustomizations } from './mergeCustomizations';\r\nimport { ICustomizerProps } from './Customizer.types';\r\n\r\n/**\r\n * The Customizer component allows for default props to be mixed into components which\r\n * are decorated with the customizable() decorator, or use the styled HOC. This enables\r\n * injection scenarios like:\r\n *\r\n * 1. render svg icons instead of the icon font within all buttons\r\n * 2. inject a custom theme object into a component\r\n *\r\n * Props are provided via the settings prop which should be one of the following:\r\n * - A json map which contains 1 or more name/value pairs representing injectable props.\r\n * - A function that receives the current settings and returns the new ones that apply to the scope\r\n *\r\n * @public\r\n */\r\nexport class Customizer extends BaseComponent<ICustomizerProps> {\r\n  private _changeCount = 0;\r\n\r\n  public componentDidMount(): void {\r\n    Customizations.observe(this._onCustomizationChange);\r\n  }\r\n\r\n  public componentWillUnmount(): void {\r\n    Customizations.unobserve(this._onCustomizationChange);\r\n  }\r\n\r\n  public render(): React.ReactElement<{}> {\r\n    const { contextTransform } = this.props;\r\n    return (\r\n      <CustomizerContext.Consumer>\r\n        {(parentContext: ICustomizerContext) => {\r\n          let newContext = mergeCustomizations(this.props, parentContext);\r\n\r\n          if (contextTransform) {\r\n            newContext = contextTransform(newContext);\r\n          }\r\n\r\n          return <CustomizerContext.Provider value={newContext}>{this.props.children}</CustomizerContext.Provider>;\r\n        }}\r\n      </CustomizerContext.Consumer>\r\n    );\r\n  }\r\n\r\n  private _onCustomizationChange = () => this.forceUpdate();\r\n}\r\n"]}