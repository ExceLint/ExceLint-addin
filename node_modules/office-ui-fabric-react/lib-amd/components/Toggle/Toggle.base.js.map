{"version":3,"file":"Toggle.base.js","sourceRoot":"../src/","sources":["components/Toggle/Toggle.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { BaseComponent, classNamesFunction, getId, inputProperties, getNativeProps } from '../../Utilities';\r\nimport { IToggleProps, IToggle, IToggleStyleProps, IToggleStyles } from './Toggle.types';\r\nimport { Label } from '../../Label';\r\nimport { KeytipData } from '../../KeytipData';\r\n\r\nexport interface IToggleState {\r\n  checked: boolean;\r\n}\r\n\r\nconst getClassNames = classNamesFunction<IToggleStyleProps, IToggleStyles>();\r\n\r\nexport class ToggleBase extends BaseComponent<IToggleProps, IToggleState> implements IToggle {\r\n  private _id: string;\r\n  private _toggleButton = React.createRef<HTMLButtonElement>();\r\n\r\n  constructor(props: IToggleProps) {\r\n    super(props);\r\n\r\n    this._warnMutuallyExclusive({\r\n      checked: 'defaultChecked'\r\n    });\r\n\r\n    this._warnDeprecations({\r\n      onAriaLabel: 'ariaLabel',\r\n      offAriaLabel: undefined,\r\n      onChanged: 'onChange'\r\n    });\r\n\r\n    this.state = {\r\n      checked: !!(props.checked || props.defaultChecked)\r\n    };\r\n    this._id = props.id || getId('Toggle');\r\n  }\r\n\r\n  /**\r\n   * Gets the current checked state of the toggle.\r\n   */\r\n  public get checked(): boolean {\r\n    return this.state.checked;\r\n  }\r\n\r\n  public componentWillReceiveProps(newProps: IToggleProps): void {\r\n    if (newProps.checked !== undefined) {\r\n      this.setState({\r\n        checked: !!newProps.checked // convert null to false\r\n      });\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const {\r\n      as: RootType = 'div',\r\n      className,\r\n      theme,\r\n      disabled,\r\n      keytipProps,\r\n      label,\r\n      ariaLabel,\r\n      onAriaLabel,\r\n      offAriaLabel,\r\n      offText,\r\n      onText,\r\n      styles,\r\n      inlineLabel\r\n    } = this.props;\r\n    const { checked } = this.state;\r\n    const stateText = checked ? onText : offText;\r\n    const badAriaLabel = checked ? onAriaLabel : offAriaLabel;\r\n    const toggleNativeProps = getNativeProps(this.props, inputProperties, ['defaultChecked']);\r\n    const classNames = getClassNames(styles!, {\r\n      theme: theme!,\r\n      className,\r\n      disabled,\r\n      checked,\r\n      inlineLabel,\r\n      onOffMissing: !onText && !offText\r\n    });\r\n\r\n    const labelId = `${this._id}-label`;\r\n    const stateTextId = `${this._id}-stateText`;\r\n\r\n    // The following properties take priority for what Narrator should read:\r\n    // 1. ariaLabel\r\n    // 2. onAriaLabel (if checked) or offAriaLabel (if not checked)\r\n    // 3. label\r\n    // 4. onText (if checked) or offText (if not checked)\r\n    let labelledById: string | undefined = undefined;\r\n    if (!ariaLabel && !badAriaLabel) {\r\n      if (label) {\r\n        labelledById = labelId;\r\n      } else if (stateText) {\r\n        labelledById = stateTextId;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <RootType className={classNames.root} hidden={(toggleNativeProps as any).hidden}>\r\n        {label && (\r\n          <Label htmlFor={this._id} className={classNames.label} id={labelId}>\r\n            {label}\r\n          </Label>\r\n        )}\r\n\r\n        <div className={classNames.container}>\r\n          <KeytipData keytipProps={keytipProps} ariaDescribedBy={(toggleNativeProps as any)['aria-describedby']} disabled={disabled}>\r\n            {(keytipAttributes: any): JSX.Element => (\r\n              <button\r\n                {...toggleNativeProps}\r\n                {...keytipAttributes}\r\n                className={classNames.pill}\r\n                disabled={disabled}\r\n                id={this._id}\r\n                type=\"button\"\r\n                role=\"switch\" // ARIA 1.1 definition; \"checkbox\" in ARIA 1.0\r\n                ref={this._toggleButton}\r\n                aria-disabled={disabled}\r\n                aria-checked={checked}\r\n                aria-label={ariaLabel ? ariaLabel : badAriaLabel}\r\n                data-is-focusable={true}\r\n                onChange={this._noop}\r\n                onClick={this._onClick}\r\n                aria-labelledby={labelledById}\r\n              >\r\n                <div className={classNames.thumb} />\r\n              </button>\r\n            )}\r\n          </KeytipData>\r\n          {stateText && (\r\n            <Label htmlFor={this._id} className={classNames.text} id={stateTextId}>\r\n              {stateText}\r\n            </Label>\r\n          )}\r\n        </div>\r\n      </RootType>\r\n    );\r\n  }\r\n\r\n  public focus() {\r\n    if (this._toggleButton.current) {\r\n      this._toggleButton.current.focus();\r\n    }\r\n  }\r\n\r\n  private _onClick = (ev: React.MouseEvent<HTMLElement>) => {\r\n    const { disabled, checked: checkedProp, onChange, onChanged, onClick } = this.props;\r\n    const { checked } = this.state;\r\n\r\n    if (!disabled) {\r\n      // Only update the state if the user hasn't provided it.\r\n      if (checkedProp === undefined) {\r\n        this.setState({\r\n          checked: !checked\r\n        });\r\n      }\r\n\r\n      if (onChange) {\r\n        onChange(ev, !checked);\r\n      }\r\n\r\n      if (onChanged) {\r\n        onChanged(!checked);\r\n      }\r\n\r\n      if (onClick) {\r\n        onClick(ev);\r\n      }\r\n    }\r\n  };\r\n\r\n  private _noop(): void {\r\n    /* no-op */\r\n  }\r\n}\r\n"]}