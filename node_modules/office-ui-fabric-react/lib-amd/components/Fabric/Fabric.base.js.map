{"version":3,"file":"Fabric.base.js","sourceRoot":"../src/","sources":["components/Fabric/Fabric.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Customizer,\n  getNativeProps,\n  divProperties,\n  classNamesFunction,\n  getDocument,\n  memoizeFunction,\n  getRTL,\n  FocusRects,\n} from '../../Utilities';\nimport { IFabricProps, IFabricStyleProps, IFabricStyles } from './Fabric.types';\nimport { IProcessedStyleSet } from '@uifabric/merge-styles';\nimport { ITheme, createTheme } from '../../Styling';\n\nconst getClassNames = classNamesFunction<IFabricStyleProps, IFabricStyles>();\nconst getFabricTheme = memoizeFunction((theme?: ITheme, isRTL?: boolean) => createTheme({ ...theme, rtl: isRTL }));\n\nconst getDir = (theme?: ITheme, dir?: IFabricProps['dir']) => {\n  const contextDir = getRTL(theme) ? 'rtl' : 'ltr';\n  const pageDir = getRTL() ? 'rtl' : 'ltr';\n  const componentDir = dir ? dir : contextDir;\n  return {\n    // If Fabric dir !== contextDir\n    // Or If contextDir !== pageDir\n    // Then we need to set dir of the Fabric root\n    rootDir: componentDir !== contextDir || componentDir !== pageDir ? componentDir : dir,\n    // If dir !== contextDir || pageDir\n    // then set contextual theme around content\n    needsTheme: componentDir !== contextDir,\n  };\n};\n\nexport class FabricBase extends React.Component<IFabricProps> {\n  private _rootElement = React.createRef<HTMLDivElement>();\n  private _removeClassNameFromBody?: () => void = undefined;\n\n  public render() {\n    const { as: Root = 'div', theme, dir } = this.props;\n    const classNames = this._getClassNames();\n    const divProps = getNativeProps<React.HTMLAttributes<HTMLDivElement>>(this.props, divProperties, ['dir']);\n    const { rootDir, needsTheme } = getDir(theme, dir);\n\n    let renderedContent = <Root dir={rootDir} {...divProps} className={classNames.root} ref={this._rootElement} />;\n\n    if (needsTheme) {\n      renderedContent = (\n        <Customizer settings={{ theme: getFabricTheme(theme, dir === 'rtl') }}>{renderedContent}</Customizer>\n      );\n    }\n\n    return (\n      <>\n        {renderedContent}\n        <FocusRects rootRef={this._rootElement} />\n      </>\n    );\n  }\n\n  public componentDidMount(): void {\n    this._addClassNameToBody();\n  }\n\n  public componentWillUnmount(): void {\n    if (this._removeClassNameFromBody) {\n      this._removeClassNameFromBody();\n    }\n  }\n\n  private _getClassNames(): IProcessedStyleSet<IFabricStyles> {\n    const { className, theme, applyTheme, styles } = this.props;\n    const classNames = getClassNames(styles, {\n      theme: theme!,\n      applyTheme: applyTheme,\n      className,\n    });\n    return classNames;\n  }\n\n  private _addClassNameToBody(): void {\n    if (this.props.applyThemeToBody) {\n      const classNames = this._getClassNames();\n      const currentDoc = getDocument(this._rootElement.current);\n      if (currentDoc) {\n        currentDoc.body.classList.add(classNames.bodyThemed);\n        this._removeClassNameFromBody = () => {\n          currentDoc.body.classList.remove(classNames.bodyThemed);\n        };\n      }\n    }\n  }\n}\n"]}