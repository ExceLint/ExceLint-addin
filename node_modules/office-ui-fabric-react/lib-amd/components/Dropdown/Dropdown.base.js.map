{"version":3,"file":"Dropdown.base.js","sourceRoot":"../src/","sources":["components/Dropdown/Dropdown.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  BaseComponent,\r\n  classNamesFunction,\r\n  divProperties,\r\n  findIndex,\r\n  getDocument,\r\n  getFirstFocusable,\r\n  getId,\r\n  getLastFocusable,\r\n  getNativeProps,\r\n  isIOS,\r\n  isMac,\r\n  IStyleFunctionOrObject,\r\n  KeyCodes,\r\n  mergeAriaAttributeValues\r\n} from '../../Utilities';\r\nimport { Callout } from '../../Callout';\r\nimport { Checkbox } from '../../Checkbox';\r\nimport { CommandButton } from '../../Button';\r\nimport { DirectionalHint } from '../../common/DirectionalHint';\r\nimport { DropdownMenuItemType, IDropdownOption, IDropdownProps, IDropdownStyleProps, IDropdownStyles } from './Dropdown.types';\r\nimport { DropdownSizePosCache } from './utilities/DropdownSizePosCache';\r\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\r\nimport { ICalloutPositionedInfo, RectangleEdge } from '../../utilities/positioning';\r\nimport { Icon } from '../../Icon';\r\nimport { ILabelStyleProps, ILabelStyles, Label } from '../../Label';\r\nimport { IProcessedStyleSet } from '../../Styling';\r\nimport { IWithResponsiveModeState } from '../../utilities/decorators/withResponsiveMode';\r\nimport { KeytipData } from '../../KeytipData';\r\nimport { Panel, IPanelStyleProps, IPanelStyles } from '../../Panel';\r\nimport { ResponsiveMode, withResponsiveMode } from '../../utilities/decorators/withResponsiveMode';\r\nimport { SelectableOptionMenuItemType } from '../../utilities/selectableOption/SelectableOption.types';\r\n\r\nconst getClassNames = classNamesFunction<IDropdownStyleProps, IDropdownStyles>();\r\n\r\n/** Internal only props interface to support mixing in responsive mode */\r\nexport interface IDropdownInternalProps extends IDropdownProps, IWithResponsiveModeState {}\r\n\r\nexport interface IDropdownState {\r\n  isOpen: boolean;\r\n  selectedIndices: number[];\r\n  /** Whether the root dropdown element has focus. */\r\n  hasFocus: boolean;\r\n  calloutRenderEdge?: RectangleEdge;\r\n}\r\n\r\n@withResponsiveMode\r\nexport class DropdownBase extends BaseComponent<IDropdownInternalProps, IDropdownState> {\r\n  public static defaultProps = {\r\n    options: [] as any[]\r\n  };\r\n\r\n  private _host = React.createRef<HTMLDivElement>();\r\n  private _focusZone = React.createRef<FocusZone>();\r\n  private _dropDown = React.createRef<HTMLDivElement>();\r\n  private _id: string;\r\n  private _isScrollIdle: boolean;\r\n  private readonly _scrollIdleDelay: number = 250 /* ms */;\r\n  private _scrollIdleTimeoutId: number | undefined;\r\n  /** True if the most recent keydown event was for alt (option) or meta (command). */\r\n  private _lastKeyDownWasAltOrMeta: boolean | undefined;\r\n  private _sizePosCache: DropdownSizePosCache = new DropdownSizePosCache();\r\n  private _classNames: IProcessedStyleSet<IDropdownStyles>;\r\n\r\n  /** Flag for when we get the first mouseMove */\r\n  private _gotMouseMove: boolean;\r\n\r\n  constructor(props: IDropdownProps) {\r\n    super(props);\r\n\r\n    this._warnDeprecations({\r\n      isDisabled: 'disabled',\r\n      onChanged: 'onChange',\r\n      placeHolder: 'placeholder'\r\n    });\r\n\r\n    this._warnMutuallyExclusive({\r\n      defaultSelectedKey: 'selectedKey',\r\n      defaultSelectedKeys: 'selectedKeys',\r\n      selectedKeys: 'selectedKey',\r\n      multiSelect: 'defaultSelectedKey',\r\n      selectedKey: 'multiSelect'\r\n    });\r\n\r\n    this._id = props.id || getId('Dropdown');\r\n    this._isScrollIdle = true;\r\n\r\n    let selectedIndices: number[];\r\n\r\n    if (this.props.multiSelect) {\r\n      const selectedKeys = props.defaultSelectedKeys !== undefined ? props.defaultSelectedKeys : props.selectedKeys;\r\n      selectedIndices = this._getSelectedIndexes(props.options, selectedKeys);\r\n    } else {\r\n      const selectedKey = props.defaultSelectedKey !== undefined ? props.defaultSelectedKey : props.selectedKey;\r\n      selectedIndices = this._getSelectedIndexes(props.options, selectedKey!);\r\n      this._sizePosCache.updateOptions(props.options);\r\n    }\r\n\r\n    this.state = {\r\n      isOpen: false,\r\n      selectedIndices,\r\n      hasFocus: false,\r\n      calloutRenderEdge: undefined\r\n    };\r\n  }\r\n\r\n  public componentWillReceiveProps(newProps: IDropdownProps): void {\r\n    // In controlled component usage where selectedKey is provided, update the selectedIndex\r\n    // state if the key or options change.\r\n    let selectedKeyProp: 'defaultSelectedKeys' | 'selectedKeys' | 'defaultSelectedKey' | 'selectedKey';\r\n\r\n    // this does a shallow compare (assumes options are pure), for the purposes of determining whether\r\n    // defaultSelectedKey/defaultSelectedKeys are respected.\r\n    const didOptionsChange = newProps.options !== this.props.options;\r\n\r\n    if (newProps.multiSelect) {\r\n      if (didOptionsChange && newProps.defaultSelectedKeys !== undefined) {\r\n        selectedKeyProp = 'defaultSelectedKeys';\r\n      } else {\r\n        selectedKeyProp = 'selectedKeys';\r\n      }\r\n    } else {\r\n      if (didOptionsChange && newProps.defaultSelectedKey !== undefined) {\r\n        selectedKeyProp = 'defaultSelectedKey';\r\n      } else {\r\n        selectedKeyProp = 'selectedKey';\r\n      }\r\n    }\r\n\r\n    if (newProps[selectedKeyProp] !== undefined && (newProps[selectedKeyProp] !== this.props[selectedKeyProp] || didOptionsChange)) {\r\n      this.setState({\r\n        selectedIndices: this._getSelectedIndexes(newProps.options, newProps[selectedKeyProp])\r\n      });\r\n    }\r\n\r\n    if (\r\n      newProps.options !== this.props.options && // preexisting code assumes purity of the options...\r\n      !newProps.multiSelect // only relevant in single selection\r\n    ) {\r\n      this._sizePosCache.updateOptions(newProps.options);\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IDropdownProps, prevState: IDropdownState) {\r\n    if (prevState.isOpen === true && this.state.isOpen === false) {\r\n      this._gotMouseMove = false;\r\n\r\n      if (this._dropDown.current) {\r\n        this._dropDown.current.focus();\r\n      }\r\n\r\n      if (this.props.onDismiss) {\r\n        this.props.onDismiss();\r\n      }\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const id = this._id;\r\n\r\n    const {\r\n      className,\r\n      label,\r\n      options,\r\n      ariaLabel,\r\n      required,\r\n      errorMessage,\r\n      multiSelect,\r\n      keytipProps,\r\n      styles: propStyles,\r\n      theme,\r\n      panelProps,\r\n      calloutProps,\r\n      onRenderTitle = this._onRenderTitle,\r\n      onRenderContainer = this._onRenderContainer,\r\n      onRenderPlaceHolder = this._onRenderPlaceholder,\r\n      onRenderCaretDown = this._onRenderCaretDown\r\n    } = this.props;\r\n    const { isOpen, selectedIndices, hasFocus, calloutRenderEdge } = this.state;\r\n\r\n    const selectedOptions = this._getAllSelectedOptions(options, selectedIndices);\r\n    const divProps = getNativeProps(this.props, divProperties);\r\n\r\n    const disabled = this._isDisabled();\r\n\r\n    const optionId = id + '-option';\r\n    const ariaAttrs =\r\n      multiSelect || disabled\r\n        ? {\r\n            role: undefined,\r\n            ariaActiveDescendant: undefined,\r\n            childRole: undefined,\r\n            ariaSetSize: undefined,\r\n            ariaPosInSet: undefined,\r\n            ariaSelected: undefined\r\n          }\r\n        : // single select\r\n          {\r\n            role: 'listbox',\r\n            ariaActiveDescendant:\r\n              isOpen && selectedIndices.length === 1 && selectedIndices[0] >= 0 ? this._id + '-list' + selectedIndices[0] : optionId,\r\n            childRole: 'option',\r\n            ariaSetSize: this._sizePosCache.optionSetSize,\r\n            ariaPosInSet: this._sizePosCache.positionInSet(selectedIndices[0]),\r\n            ariaSelected: selectedIndices[0] === undefined ? undefined : true\r\n          };\r\n\r\n    this._classNames = getClassNames(propStyles, {\r\n      theme,\r\n      className,\r\n      hasError: Boolean(errorMessage && errorMessage.length > 0),\r\n      isOpen,\r\n      required,\r\n      disabled,\r\n      isRenderingPlaceholder: !selectedOptions.length,\r\n      panelClassName: !!panelProps ? panelProps.className : undefined,\r\n      calloutClassName: !!calloutProps ? calloutProps.className : undefined,\r\n      calloutRenderEdge: calloutRenderEdge\r\n    });\r\n\r\n    const labelStyles = this._classNames.subComponentStyles\r\n      ? (this._classNames.subComponentStyles.label as IStyleFunctionOrObject<ILabelStyleProps, ILabelStyles>)\r\n      : undefined;\r\n\r\n    return (\r\n      <div className={this._classNames.root}>\r\n        {label && (\r\n          <Label className={this._classNames.label} id={id + '-label'} htmlFor={id} required={required} styles={labelStyles}>\r\n            {label}\r\n          </Label>\r\n        )}\r\n        <KeytipData keytipProps={keytipProps} disabled={disabled}>\r\n          {(keytipAttributes: any): JSX.Element => (\r\n            <div\r\n              {...keytipAttributes}\r\n              data-is-focusable={!disabled}\r\n              ref={this._dropDown}\r\n              id={id}\r\n              tabIndex={disabled ? -1 : 0}\r\n              aria-expanded={isOpen ? 'true' : 'false'}\r\n              role={ariaAttrs.role}\r\n              aria-label={ariaLabel}\r\n              aria-labelledby={label && !ariaLabel ? id + '-label' : undefined}\r\n              aria-describedby={mergeAriaAttributeValues(optionId, keytipAttributes['aria-describedby'])}\r\n              aria-activedescendant={isOpen ? ariaAttrs.ariaActiveDescendant : undefined}\r\n              aria-required={required}\r\n              aria-disabled={disabled}\r\n              aria-owns={isOpen ? id + '-list' : undefined}\r\n              {...divProps}\r\n              className={this._classNames.dropdown}\r\n              onBlur={this._onDropdownBlur}\r\n              onKeyDown={this._onDropdownKeyDown}\r\n              onKeyUp={this._onDropdownKeyUp}\r\n              onClick={this._onDropdownClick}\r\n              onFocus={this._onFocus}\r\n            >\r\n              <span\r\n                id={optionId}\r\n                className={this._classNames.title}\r\n                aria-atomic={true}\r\n                role={ariaAttrs.childRole}\r\n                aria-live={!hasFocus || disabled || multiSelect || isOpen ? 'off' : 'assertive'}\r\n                aria-label={selectedOptions.length ? selectedOptions[0].text : this._placeholder}\r\n                aria-setsize={ariaAttrs.ariaSetSize}\r\n                aria-posinset={ariaAttrs.ariaPosInSet}\r\n                aria-selected={ariaAttrs.ariaSelected}\r\n              >\r\n                {// If option is selected render title, otherwise render the placeholder text\r\n                selectedOptions.length\r\n                  ? onRenderTitle(selectedOptions, this._onRenderTitle)\r\n                  : onRenderPlaceHolder(this.props, this._onRenderPlaceholder)}\r\n              </span>\r\n              <span className={this._classNames.caretDownWrapper}>{onRenderCaretDown(this.props, this._onRenderCaretDown)}</span>\r\n            </div>\r\n          )}\r\n        </KeytipData>\r\n        {isOpen && onRenderContainer(this.props, this._onRenderContainer)}\r\n        {errorMessage && errorMessage.length > 0 && <div className={this._classNames.errorMessage}>{errorMessage}</div>}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public focus(shouldOpenOnFocus?: boolean): void {\r\n    if (this._dropDown.current && this._dropDown.current.tabIndex !== -1) {\r\n      this._dropDown.current.focus();\r\n\r\n      if (shouldOpenOnFocus) {\r\n        this.setState({\r\n          isOpen: true\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  public setSelectedIndex(event: React.FormEvent<HTMLDivElement>, index: number): void {\r\n    const { onChange, onChanged, options, selectedKey, selectedKeys, multiSelect, notifyOnReselect } = this.props;\r\n    const { selectedIndices = [] } = this.state;\r\n    const checked: boolean = selectedIndices ? selectedIndices.indexOf(index) > -1 : false;\r\n\r\n    index = Math.max(0, Math.min(options.length - 1, index));\r\n\r\n    if (!multiSelect && !notifyOnReselect && index === selectedIndices[0]) {\r\n      return;\r\n    } else if (!multiSelect && selectedKey === undefined) {\r\n      // Set the selected option if this is an uncontrolled component\r\n      this.setState({\r\n        selectedIndices: [index]\r\n      });\r\n    } else if (multiSelect && selectedKeys === undefined) {\r\n      const newIndexes = selectedIndices ? this._copyArray(selectedIndices) : [];\r\n      if (checked) {\r\n        const position = newIndexes.indexOf(index);\r\n        if (position > -1) {\r\n          // unchecked the current one\r\n          newIndexes.splice(position, 1);\r\n        }\r\n      } else {\r\n        // add the new selected index into the existing one\r\n        newIndexes.push(index);\r\n      }\r\n      this.setState({\r\n        selectedIndices: newIndexes\r\n      });\r\n    }\r\n\r\n    if (onChange) {\r\n      // for single-select, option passed in will always be selected.\r\n      // for multi-select, flip the checked value\r\n      const changedOpt = multiSelect ? { ...options[index], selected: !checked } : options[index];\r\n      onChange(event, changedOpt, index);\r\n    }\r\n\r\n    if (onChanged) {\r\n      // for single-select, option passed in will always be selected.\r\n      // for multi-select, flip the checked value\r\n      const changedOpt = multiSelect ? { ...options[index], selected: !checked } : options[index];\r\n      onChanged(changedOpt, index);\r\n    }\r\n  }\r\n\r\n  /** Get either props.placeholder (new name) or props.placeHolder (old name) */\r\n  private get _placeholder(): string | undefined {\r\n    return this.props.placeholder || this.props.placeHolder;\r\n  }\r\n\r\n  private _copyArray(array: any[]): any[] {\r\n    const newArray = [];\r\n    for (const element of array) {\r\n      newArray.push(element);\r\n    }\r\n    return newArray;\r\n  }\r\n\r\n  /**\r\n   * Finds the next valid Dropdown option and sets the selected index to it.\r\n   * @param stepValue Value of how many items the function should traverse.  Should be -1 or 1.\r\n   * @param index Index of where the search should start\r\n   * @param selectedIndex The selectedIndex Dropdown's state\r\n   * @returns The next valid dropdown option's index\r\n   */\r\n  private _moveIndex(event: React.FormEvent<HTMLDivElement>, stepValue: number, index: number, selectedIndex: number): number {\r\n    const { options } = this.props;\r\n    // Return selectedIndex if nothing has changed or options is empty\r\n    if (selectedIndex === index || options.length === 0) {\r\n      return selectedIndex;\r\n    }\r\n\r\n    // Set starting index to 0 if index is < 0\r\n    if (index < 0) {\r\n      index = 0;\r\n    }\r\n    // Set starting index to last option index if greater than options.length\r\n    if (index >= options.length) {\r\n      index = options.length - 1;\r\n    }\r\n    let stepCounter = 0;\r\n    // If current index is a header or divider, or disabled, increment by step\r\n    while (\r\n      options[index].itemType === DropdownMenuItemType.Header ||\r\n      options[index].itemType === DropdownMenuItemType.Divider ||\r\n      options[index].disabled\r\n    ) {\r\n      // If stepCounter exceeds length of options, then return selectedIndex (-1)\r\n      if (stepCounter >= options.length) {\r\n        return selectedIndex;\r\n      }\r\n      // If index + stepValue is out of bounds, wrap around\r\n      if (index + stepValue < 0) {\r\n        index = options.length;\r\n      } else if (index + stepValue >= options.length) {\r\n        index = -1;\r\n      }\r\n\r\n      index = index + stepValue;\r\n      stepCounter++;\r\n    }\r\n\r\n    this.setSelectedIndex(event, index);\r\n    return index;\r\n  }\r\n\r\n  /** Render text in dropdown input */\r\n  private _onRenderTitle = (item: IDropdownOption[]): JSX.Element => {\r\n    const { multiSelectDelimiter = ', ' } = this.props;\r\n\r\n    const displayTxt = item.map(i => i.text).join(multiSelectDelimiter);\r\n    return <span>{displayTxt}</span>;\r\n  };\r\n\r\n  /** Render placeholder text in dropdown input */\r\n  private _onRenderPlaceholder = (props: IDropdownProps): JSX.Element | null => {\r\n    if (!this._placeholder) {\r\n      return null;\r\n    }\r\n    return <span>{this._placeholder}</span>;\r\n  };\r\n\r\n  /** Render Callout or Panel container and pass in list */\r\n  private _onRenderContainer = (props: IDropdownProps): JSX.Element => {\r\n    const { responsiveMode, calloutProps, panelProps, dropdownWidth } = this.props;\r\n\r\n    const isSmall = responsiveMode! <= ResponsiveMode.medium;\r\n\r\n    const panelStyles = this._classNames.subComponentStyles\r\n      ? (this._classNames.subComponentStyles.panel as IStyleFunctionOrObject<IPanelStyleProps, IPanelStyles>)\r\n      : undefined;\r\n\r\n    return isSmall ? (\r\n      <Panel isOpen={true} isLightDismiss={true} onDismissed={this._onDismiss} hasCloseButton={false} styles={panelStyles} {...panelProps}>\r\n        {this._renderFocusableList(props)}\r\n      </Panel>\r\n    ) : (\r\n      <Callout\r\n        isBeakVisible={false}\r\n        gapSpace={0}\r\n        doNotLayer={false}\r\n        directionalHintFixed={false}\r\n        directionalHint={DirectionalHint.bottomLeftEdge}\r\n        {...calloutProps}\r\n        className={this._classNames.callout}\r\n        target={this._dropDown.current}\r\n        onDismiss={this._onDismiss}\r\n        onScroll={this._onScroll}\r\n        onPositioned={this._onPositioned}\r\n        calloutWidth={dropdownWidth || (this._dropDown.current ? this._dropDown.current.clientWidth : 0)}\r\n      >\r\n        {this._renderFocusableList(props)}\r\n      </Callout>\r\n    );\r\n  };\r\n\r\n  /** Render Caret Down Icon */\r\n  private _onRenderCaretDown = (props: IDropdownProps): JSX.Element => {\r\n    return <Icon className={this._classNames.caretDown} iconName=\"ChevronDown\" />;\r\n  };\r\n\r\n  /** Wrap item list in a FocusZone */\r\n  private _renderFocusableList(props: IDropdownProps): JSX.Element {\r\n    const { onRenderList = this._onRenderList, label } = props;\r\n    const id = this._id;\r\n\r\n    return (\r\n      <div\r\n        className={this._classNames.dropdownItemsWrapper}\r\n        onKeyDown={this._onZoneKeyDown}\r\n        onKeyUp={this._onZoneKeyUp}\r\n        ref={this._host}\r\n        tabIndex={0}\r\n      >\r\n        <FocusZone\r\n          ref={this._focusZone}\r\n          direction={FocusZoneDirection.vertical}\r\n          id={id + '-list'}\r\n          className={this._classNames.dropdownItems}\r\n          aria-labelledby={label ? id + '-label' : undefined}\r\n          role=\"listbox\"\r\n        >\r\n          {onRenderList(props, this._onRenderList)}\r\n        </FocusZone>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /** Render List of items */\r\n  private _onRenderList = (props: IDropdownProps): JSX.Element => {\r\n    const { onRenderItem = this._onRenderItem } = this.props;\r\n\r\n    return <>{this.props.options.map((item: any, index: number) => onRenderItem({ ...item, index }, this._onRenderItem))}</>;\r\n  };\r\n\r\n  private _onRenderItem = (item: IDropdownOption): JSX.Element | null => {\r\n    switch (item.itemType) {\r\n      case SelectableOptionMenuItemType.Divider:\r\n        return this._renderSeparator(item);\r\n      case SelectableOptionMenuItemType.Header:\r\n        return this._renderHeader(item);\r\n      default:\r\n        return this._renderOption(item);\r\n    }\r\n  };\r\n\r\n  private _renderSeparator(item: IDropdownOption): JSX.Element | null {\r\n    const { index, key } = item;\r\n    if (index! > 0) {\r\n      return <div role=\"separator\" key={key} className={this._classNames.dropdownDivider} />;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  private _renderHeader(item: IDropdownOption): JSX.Element {\r\n    const { onRenderOption = this._onRenderOption } = this.props;\r\n    const { key } = item;\r\n    return (\r\n      <div key={key} className={this._classNames.dropdownItemHeader}>\r\n        {onRenderOption(item, this._onRenderOption)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _renderOption = (item: IDropdownOption): JSX.Element => {\r\n    const { onRenderOption = this._onRenderOption } = this.props;\r\n    const { selectedIndices = [] } = this.state;\r\n    const id = this._id;\r\n    const isItemSelected = item.index !== undefined && selectedIndices ? selectedIndices.indexOf(item.index) > -1 : false;\r\n\r\n    // select the right className based on the combination of selected/disabled\r\n    const itemClassName =\r\n      isItemSelected && item.disabled === true // predicate: both selected and disabled\r\n        ? this._classNames.dropdownItemSelectedAndDisabled\r\n        : isItemSelected // predicate: selected only\r\n        ? this._classNames.dropdownItemSelected\r\n        : item.disabled === true // predicate: disabled only\r\n        ? this._classNames.dropdownItemDisabled\r\n        : this._classNames.dropdownItem;\r\n\r\n    return !this.props.multiSelect ? (\r\n      <CommandButton\r\n        id={id + '-list' + item.index}\r\n        key={item.key}\r\n        data-index={item.index}\r\n        data-is-focusable={!item.disabled}\r\n        disabled={item.disabled}\r\n        className={itemClassName}\r\n        onClick={this._onItemClick(item)}\r\n        onMouseEnter={this._onItemMouseEnter.bind(this, item)}\r\n        onMouseLeave={this._onMouseItemLeave.bind(this, item)}\r\n        onMouseMove={this._onItemMouseMove.bind(this, item)}\r\n        role=\"option\"\r\n        aria-selected={isItemSelected ? 'true' : 'false'}\r\n        ariaLabel={item.ariaLabel}\r\n        title={item.title ? item.title : item.text}\r\n      >\r\n        {onRenderOption(item, this._onRenderOption)}\r\n      </CommandButton>\r\n    ) : (\r\n      <Checkbox\r\n        id={id + '-list' + item.index}\r\n        key={item.key}\r\n        data-index={item.index}\r\n        data-is-focusable={!item.disabled}\r\n        disabled={item.disabled}\r\n        onChange={this._onItemClick(item)}\r\n        inputProps={{\r\n          onMouseEnter: this._onItemMouseEnter.bind(this, item),\r\n          onMouseLeave: this._onMouseItemLeave.bind(this, item),\r\n          onMouseMove: this._onItemMouseMove.bind(this, item)\r\n        }}\r\n        label={item.text}\r\n        title={item.title ? item.title : item.text}\r\n        onRenderLabel={this._onRenderLabel.bind(this, item)}\r\n        className={itemClassName}\r\n        role=\"option\"\r\n        aria-selected={isItemSelected ? 'true' : 'false'}\r\n        checked={isItemSelected}\r\n      />\r\n    );\r\n  };\r\n\r\n  /** Render content of item (i.e. text/icon inside of button) */\r\n  private _onRenderOption = (item: IDropdownOption): JSX.Element => {\r\n    return <span className={this._classNames.dropdownOptionText}>{item.text}</span>;\r\n  };\r\n\r\n  /** Render custom label for drop down item */\r\n  private _onRenderLabel = (item: IDropdownOption): JSX.Element | null => {\r\n    const { onRenderOption = this._onRenderOption } = this.props;\r\n    return onRenderOption(item, this._onRenderOption);\r\n  };\r\n\r\n  private _onPositioned = (positions?: ICalloutPositionedInfo): void => {\r\n    if (this._focusZone.current) {\r\n      // Focusing an element can trigger a reflow. Making this wait until there is an animation\r\n      // frame can improve perf significantly.\r\n      this._async.requestAnimationFrame(() => {\r\n        const selectedIndices = this.state.selectedIndices;\r\n        if (selectedIndices && selectedIndices[0] && !this.props.options[selectedIndices[0]].disabled) {\r\n          const element: HTMLElement = getDocument()!.querySelector(`#${this._id}-list${selectedIndices[0]}`) as HTMLElement;\r\n          this._focusZone.current!.focusElement(element);\r\n        } else {\r\n          this._focusZone.current!.focus();\r\n        }\r\n      });\r\n    }\r\n\r\n    if (!this.state.calloutRenderEdge || this.state.calloutRenderEdge !== positions!.targetEdge) {\r\n      this.setState({\r\n        calloutRenderEdge: positions!.targetEdge\r\n      });\r\n    }\r\n  };\r\n\r\n  private _onItemClick = (item: IDropdownOption): ((event: React.MouseEvent<HTMLDivElement>) => void) => {\r\n    return (event: React.MouseEvent<HTMLDivElement>): void => {\r\n      if (!item.disabled) {\r\n        this.setSelectedIndex(event, item.index!);\r\n        if (!this.props.multiSelect) {\r\n          // only close the callout when it's in single-select mode\r\n          this.setState({\r\n            isOpen: false\r\n          });\r\n        }\r\n      }\r\n    };\r\n  };\r\n\r\n  /**\r\n   * Scroll handler for the callout to make sure the mouse events\r\n   * for updating focus are not interacting during scroll\r\n   */\r\n  private _onScroll = (): void => {\r\n    if (!this._isScrollIdle && this._scrollIdleTimeoutId !== undefined) {\r\n      this._async.clearTimeout(this._scrollIdleTimeoutId);\r\n      this._scrollIdleTimeoutId = undefined;\r\n    } else {\r\n      this._isScrollIdle = false;\r\n    }\r\n\r\n    this._scrollIdleTimeoutId = this._async.setTimeout(() => {\r\n      this._isScrollIdle = true;\r\n    }, this._scrollIdleDelay);\r\n  };\r\n\r\n  private _onItemMouseEnter(item: any, ev: React.MouseEvent<HTMLElement>): void {\r\n    if (this._shouldIgnoreMouseEvent()) {\r\n      return;\r\n    }\r\n\r\n    const targetElement = ev.currentTarget as HTMLElement;\r\n    targetElement.focus();\r\n  }\r\n\r\n  private _onItemMouseMove(item: any, ev: React.MouseEvent<HTMLElement>): void {\r\n    const targetElement = ev.currentTarget as HTMLElement;\r\n    this._gotMouseMove = true;\r\n\r\n    if (!this._isScrollIdle || document.activeElement === targetElement) {\r\n      return;\r\n    }\r\n\r\n    targetElement.focus();\r\n  }\r\n\r\n  private _onMouseItemLeave = (item: any, ev: React.MouseEvent<HTMLElement>): void => {\r\n    if (this._shouldIgnoreMouseEvent()) {\r\n      return;\r\n    }\r\n\r\n    /**\r\n     * IE11 focus() method forces parents to scroll to top of element.\r\n     * Edge and IE expose a setActive() function for focusable divs that\r\n     * sets the page focus but does not scroll the parent element.\r\n     */\r\n    if (this._host.current) {\r\n      if ((this._host.current as any).setActive) {\r\n        try {\r\n          (this._host.current as any).setActive();\r\n        } catch (e) {\r\n          /* no-op */\r\n        }\r\n      } else {\r\n        this._host.current.focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  private _shouldIgnoreMouseEvent(): boolean {\r\n    return !this._isScrollIdle || !this._gotMouseMove;\r\n  }\r\n\r\n  private _onDismiss = (): void => {\r\n    this.setState({ isOpen: false });\r\n\r\n    if (this._dropDown.current) {\r\n      this._dropDown.current.focus();\r\n    }\r\n  };\r\n\r\n  /** Get all selected indexes for multi-select mode */\r\n  private _getSelectedIndexes(options: IDropdownOption[], selectedKey: string | number | string[] | number[] | null | undefined): number[] {\r\n    if (selectedKey === undefined) {\r\n      if (this.props.multiSelect) {\r\n        return this._getAllSelectedIndices(options);\r\n      }\r\n      const selectedIndex = this._getSelectedIndex(options, null);\r\n      return selectedIndex !== -1 ? [selectedIndex] : [];\r\n    } else if (!Array.isArray(selectedKey)) {\r\n      return [this._getSelectedIndex(options, selectedKey)];\r\n    }\r\n\r\n    const selectedIndices: number[] = [];\r\n    for (const key of selectedKey) {\r\n      selectedIndices.push(this._getSelectedIndex(options, key));\r\n    }\r\n    return selectedIndices;\r\n  }\r\n\r\n  /** Get all selected options for multi-select mode */\r\n  private _getAllSelectedOptions(options: IDropdownOption[], selectedIndices: number[]): IDropdownOption[] {\r\n    const selectedOptions: IDropdownOption[] = [];\r\n    for (const index of selectedIndices) {\r\n      const option = options[index];\r\n\r\n      if (option) {\r\n        selectedOptions.push(option);\r\n      }\r\n    }\r\n\r\n    return selectedOptions;\r\n  }\r\n\r\n  private _getAllSelectedIndices(options: IDropdownOption[]): number[] {\r\n    return options.map((option: IDropdownOption, index: number) => (option.selected ? index : -1)).filter(index => index !== -1);\r\n  }\r\n\r\n  private _getSelectedIndex(options: IDropdownOption[], selectedKey: string | number | null): number {\r\n    return findIndex(options, option => {\r\n      // tslint:disable-next-line:triple-equals\r\n      if (selectedKey != null) {\r\n        return option.key === selectedKey;\r\n      } else {\r\n        return !!option.isSelected || !!option.selected;\r\n      }\r\n    });\r\n  }\r\n\r\n  private _onDropdownBlur = (ev: React.FocusEvent<HTMLDivElement>): void => {\r\n    // If Dropdown disabled do not proceed with this logic.\r\n    const disabled = this._isDisabled();\r\n    if (disabled) {\r\n      return;\r\n    }\r\n\r\n    // hasFocus tracks whether the root element has focus so always update the state.\r\n    this.setState({ hasFocus: false });\r\n\r\n    if (this.state.isOpen) {\r\n      // Do not onBlur when the callout is opened\r\n      return;\r\n    }\r\n    if (this.props.onBlur) {\r\n      this.props.onBlur(ev);\r\n    }\r\n  };\r\n\r\n  private _onDropdownKeyDown = (ev: React.KeyboardEvent<HTMLDivElement>): void => {\r\n    // If Dropdown disabled do not process any keyboard events.\r\n    const disabled = this._isDisabled();\r\n    if (disabled) {\r\n      return;\r\n    }\r\n\r\n    // Take note if we are processing an alt (option) or meta (command) keydown.\r\n    // See comment in _shouldHandleKeyUp for reasoning.\r\n    this._lastKeyDownWasAltOrMeta = this._isAltOrMeta(ev);\r\n\r\n    if (this.props.onKeyDown) {\r\n      this.props.onKeyDown(ev);\r\n      if (ev.defaultPrevented) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    let newIndex: number | undefined;\r\n    const selectedIndex = this.state.selectedIndices.length ? this.state.selectedIndices[0] : -1;\r\n    const containsExpandCollapseModifier = ev.altKey || ev.metaKey;\r\n    const isOpen = this.state.isOpen;\r\n\r\n    switch (ev.which) {\r\n      case KeyCodes.enter:\r\n        this.setState({\r\n          isOpen: !isOpen\r\n        });\r\n        break;\r\n\r\n      case KeyCodes.escape:\r\n        if (!isOpen) {\r\n          return;\r\n        }\r\n\r\n        this.setState({\r\n          isOpen: false\r\n        });\r\n        break;\r\n\r\n      case KeyCodes.up:\r\n        if (containsExpandCollapseModifier) {\r\n          if (isOpen) {\r\n            this.setState({ isOpen: false });\r\n            break;\r\n          }\r\n\r\n          return;\r\n        }\r\n        if (this.props.multiSelect) {\r\n          this.setState({ isOpen: true });\r\n        } else if (!this._isDisabled()) {\r\n          newIndex = this._moveIndex(ev, -1, selectedIndex - 1, selectedIndex);\r\n        }\r\n        break;\r\n\r\n      case KeyCodes.down:\r\n        if (containsExpandCollapseModifier) {\r\n          ev.stopPropagation();\r\n          ev.preventDefault();\r\n        }\r\n        if ((containsExpandCollapseModifier && !isOpen) || this.props.multiSelect) {\r\n          this.setState({ isOpen: true });\r\n        } else if (!this._isDisabled()) {\r\n          newIndex = this._moveIndex(ev, 1, selectedIndex + 1, selectedIndex);\r\n        }\r\n        break;\r\n\r\n      case KeyCodes.home:\r\n        if (!this.props.multiSelect) {\r\n          newIndex = this._moveIndex(ev, 1, 0, selectedIndex);\r\n        }\r\n        break;\r\n\r\n      case KeyCodes.end:\r\n        if (!this.props.multiSelect) {\r\n          newIndex = this._moveIndex(ev, -1, this.props.options.length - 1, selectedIndex);\r\n        }\r\n        break;\r\n\r\n      case KeyCodes.space:\r\n        // event handled in _onDropdownKeyUp\r\n        break;\r\n\r\n      default:\r\n        return;\r\n    }\r\n\r\n    if (newIndex !== selectedIndex) {\r\n      ev.stopPropagation();\r\n      ev.preventDefault();\r\n    }\r\n  };\r\n\r\n  private _onDropdownKeyUp = (ev: React.KeyboardEvent<HTMLDivElement>): void => {\r\n    // If Dropdown disabled do not process any keyboard events.\r\n    const disabled = this._isDisabled();\r\n    if (disabled) {\r\n      return;\r\n    }\r\n\r\n    const shouldHandleKey = this._shouldHandleKeyUp(ev);\r\n    const isOpen = this.state.isOpen;\r\n\r\n    if (this.props.onKeyUp) {\r\n      this.props.onKeyUp(ev);\r\n      if (ev.preventDefault) {\r\n        return;\r\n      }\r\n    }\r\n    switch (ev.which) {\r\n      case KeyCodes.space:\r\n        this.setState({\r\n          isOpen: !isOpen\r\n        });\r\n        break;\r\n\r\n      default:\r\n        if (shouldHandleKey && isOpen) {\r\n          this.setState({ isOpen: false });\r\n        }\r\n        return;\r\n    }\r\n\r\n    ev.stopPropagation();\r\n    ev.preventDefault();\r\n  };\r\n\r\n  /**\r\n   * Returns true if the key for the event is alt (Mac option) or meta (Mac command).\r\n   */\r\n  private _isAltOrMeta(ev: React.KeyboardEvent<HTMLElement>): boolean {\r\n    return ev.which === KeyCodes.alt || ev.key === 'Meta';\r\n  }\r\n\r\n  /**\r\n   * We close the menu on key up only if ALL of the following are true:\r\n   * - Most recent key down was alt or meta (command)\r\n   * - The alt/meta key down was NOT followed by some other key (such as down/up arrow to\r\n   *   expand/collapse the menu)\r\n   * - We're not on a Mac (or iOS)\r\n   *\r\n   * This is because on Windows, pressing alt moves focus to the application menu bar or similar,\r\n   * closing any open context menus. There is not a similar behavior on Macs.\r\n   */\r\n  private _shouldHandleKeyUp(ev: React.KeyboardEvent<HTMLElement>): boolean {\r\n    const keyPressIsAltOrMetaAlone = this._lastKeyDownWasAltOrMeta && this._isAltOrMeta(ev);\r\n    this._lastKeyDownWasAltOrMeta = false;\r\n    return !!keyPressIsAltOrMetaAlone && !(isMac() || isIOS());\r\n  }\r\n\r\n  private _onZoneKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\r\n    let elementToFocus;\r\n\r\n    // Take note if we are processing an alt (option) or meta (command) keydown.\r\n    // See comment in _shouldHandleKeyUp for reasoning.\r\n    this._lastKeyDownWasAltOrMeta = this._isAltOrMeta(ev);\r\n    const containsExpandCollapseModifier = ev.altKey || ev.metaKey;\r\n\r\n    switch (ev.which) {\r\n      case KeyCodes.up:\r\n        if (containsExpandCollapseModifier) {\r\n          this.setState({ isOpen: false });\r\n        } else {\r\n          if (this._host.current) {\r\n            elementToFocus = getLastFocusable(this._host.current, this._host.current.lastChild as HTMLElement, true);\r\n          }\r\n        }\r\n        break;\r\n\r\n      // All directional keystrokes should be canceled when the zone is rendered.\r\n      // This avoids the body scroll from reacting and thus dismissing the dropdown.\r\n      case KeyCodes.home:\r\n      case KeyCodes.end:\r\n      case KeyCodes.pageUp:\r\n      case KeyCodes.pageDown:\r\n        break;\r\n\r\n      case KeyCodes.down:\r\n        if (!containsExpandCollapseModifier && this._host.current) {\r\n          elementToFocus = getFirstFocusable(this._host.current, this._host.current.firstChild as HTMLElement, true);\r\n        }\r\n        break;\r\n\r\n      case KeyCodes.escape:\r\n        this.setState({ isOpen: false });\r\n        break;\r\n\r\n      case KeyCodes.tab:\r\n        this.setState({ isOpen: false });\r\n        return;\r\n\r\n      default:\r\n        return;\r\n    }\r\n\r\n    if (elementToFocus) {\r\n      elementToFocus.focus();\r\n    }\r\n\r\n    ev.stopPropagation();\r\n    ev.preventDefault();\r\n  };\r\n\r\n  private _onZoneKeyUp = (ev: React.KeyboardEvent<HTMLElement>): void => {\r\n    const shouldHandleKey = this._shouldHandleKeyUp(ev);\r\n\r\n    if (shouldHandleKey && this.state.isOpen) {\r\n      this.setState({ isOpen: false });\r\n      ev.preventDefault();\r\n    }\r\n  };\r\n\r\n  private _onDropdownClick = (ev: React.MouseEvent<HTMLDivElement>): void => {\r\n    if (this.props.onClick) {\r\n      this.props.onClick(ev);\r\n      if (ev.preventDefault) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    const { isOpen } = this.state;\r\n    const disabled = this._isDisabled();\r\n\r\n    if (!disabled) {\r\n      this.setState({\r\n        isOpen: !isOpen\r\n      });\r\n    }\r\n  };\r\n\r\n  private _onFocus = (ev: React.FocusEvent<HTMLDivElement>): void => {\r\n    const { isOpen, selectedIndices } = this.state;\r\n    const { multiSelect } = this.props;\r\n\r\n    const disabled = this._isDisabled();\r\n\r\n    if (!disabled) {\r\n      if (!isOpen && selectedIndices.length === 0 && !multiSelect) {\r\n        // Per aria\r\n        this._moveIndex(ev, 1, 0, -1);\r\n      }\r\n      if (this.props.onFocus) {\r\n        this.props.onFocus(ev);\r\n      }\r\n      this.setState({ hasFocus: true });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Because the isDisabled prop is deprecated, we have had to repeat this logic all over the place.\r\n   * This helper method avoids all the repetition.\r\n   */\r\n  private _isDisabled: () => boolean | undefined = () => {\r\n    let { disabled } = this.props;\r\n    const { isDisabled } = this.props;\r\n\r\n    // Remove this deprecation workaround at 1.0.0\r\n    if (isDisabled !== undefined) {\r\n      disabled = isDisabled;\r\n    }\r\n\r\n    return disabled;\r\n  };\r\n}\r\n"]}