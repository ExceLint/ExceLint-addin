{"version":3,"file":"PersonaPresence.base.js","sourceRoot":"../src/","sources":["components/Persona/PersonaPresence/PersonaPresence.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { classNamesFunction } from '../../../Utilities';\nimport { Icon } from '../../../Icon';\nimport {\n  IPersonaPresenceProps,\n  IPersonaPresenceStyleProps,\n  IPersonaPresenceStyles,\n  PersonaPresence as PersonaPresenceEnum,\n  PersonaSize,\n} from '../Persona.types';\nimport { sizeBoolean } from '../PersonaConsts';\n\nconst coinSizeFontScaleFactor = 6;\nconst coinSizePresenceScaleFactor = 3;\nconst presenceMaxSize = 40;\nconst presenceFontMaxSize = 20;\n\nconst getClassNames = classNamesFunction<IPersonaPresenceStyleProps, IPersonaPresenceStyles>({\n  // There can be many PersonaPresence rendered with different sizes.\n  // Therefore setting a larger cache size.\n  cacheSize: 100,\n});\n\n/**\n * PersonaPresence with no default styles.\n * [Use the `getStyles` API to add your own styles.](https://github.com/microsoft/fluentui/wiki/Styling)\n */\nexport class PersonaPresenceBase extends React.Component<IPersonaPresenceProps, {}> {\n  constructor(props: IPersonaPresenceProps) {\n    super(props);\n  }\n\n  public render(): JSX.Element | null {\n    const {\n      coinSize,\n      isOutOfOffice,\n      styles, // Use getStyles from props.\n      presence,\n      theme,\n      presenceTitle,\n      presenceColors,\n    } = this.props;\n    const size = sizeBoolean(this.props.size as PersonaSize);\n\n    // Render Presence Icon if Persona is above size 32.\n    const renderIcon =\n      !(size.isSize8 || size.isSize10 || size.isSize16 || size.isSize24 || size.isSize28 || size.isSize32) &&\n      (coinSize ? coinSize > 32 : true);\n\n    const presenceHeightWidth: string = coinSize\n      ? coinSize / coinSizePresenceScaleFactor < presenceMaxSize\n        ? coinSize / coinSizePresenceScaleFactor + 'px'\n        : presenceMaxSize + 'px'\n      : '';\n    const presenceFontSize: string = coinSize\n      ? coinSize / coinSizeFontScaleFactor < presenceFontMaxSize\n        ? coinSize / coinSizeFontScaleFactor + 'px'\n        : presenceFontMaxSize + 'px'\n      : '';\n    const coinSizeWithPresenceIconStyle = coinSize\n      ? { fontSize: presenceFontSize, lineHeight: presenceHeightWidth }\n      : undefined;\n    const coinSizeWithPresenceStyle = coinSize\n      ? { width: presenceHeightWidth, height: presenceHeightWidth }\n      : undefined;\n\n    // Use getStyles from props, or fall back to getStyles from styles file.\n    const classNames = getClassNames(styles, {\n      theme: theme!,\n      presence,\n      size: this.props.size,\n      isOutOfOffice,\n      presenceColors,\n    });\n\n    if (presence === PersonaPresenceEnum.none) {\n      return null;\n    }\n\n    return (\n      <div role=\"presentation\" className={classNames.presence} style={coinSizeWithPresenceStyle} title={presenceTitle}>\n        {renderIcon && this._onRenderIcon(classNames.presenceIcon, coinSizeWithPresenceIconStyle)}\n      </div>\n    );\n  }\n\n  private _onRenderIcon = (className?: string, style?: React.CSSProperties): JSX.Element => (\n    <Icon className={className} iconName={determineIcon(this.props.presence, this.props.isOutOfOffice)} style={style} />\n  );\n}\n\nfunction determineIcon(\n  presence: PersonaPresenceEnum | undefined,\n  isOutOfOffice: boolean | undefined,\n): string | undefined {\n  if (!presence) {\n    return undefined;\n  }\n\n  const oofIcon = 'SkypeArrow';\n\n  switch (PersonaPresenceEnum[presence]) {\n    case 'online':\n      return 'SkypeCheck';\n    case 'away':\n      return isOutOfOffice ? oofIcon : 'SkypeClock';\n    case 'dnd':\n      return 'SkypeMinus';\n    case 'offline':\n      return isOutOfOffice ? oofIcon : '';\n  }\n\n  return '';\n}\n"]}