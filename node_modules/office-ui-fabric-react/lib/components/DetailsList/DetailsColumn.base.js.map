{"version":3,"file":"DetailsColumn.base.js","sourceRoot":"../src/","sources":["components/DetailsList/DetailsColumn.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { Icon } from '../../Icon';\r\nimport { BaseComponent, IRenderFunction, IDisposable, classNamesFunction, IClassNames } from '../../Utilities';\r\nimport { IColumn, ColumnActionsMode } from './DetailsList.types';\r\n\r\nimport { ITooltipHostProps } from '../../Tooltip';\r\nimport { IDragDropOptions } from './../../utilities/dragdrop/interfaces';\r\nimport { IDetailsColumnStyles } from './DetailsColumn.types';\r\nimport { DEFAULT_CELL_STYLE_PROPS } from './DetailsRow.styles';\r\nimport { IDetailsColumnStyleProps, IDetailsColumnProps } from './DetailsColumn.types';\r\n\r\nconst MOUSEDOWN_PRIMARY_BUTTON = 0; // for mouse down event we are using ev.button property, 0 means left button\r\n\r\nconst getClassNames = classNamesFunction<IDetailsColumnStyleProps, IDetailsColumnStyles>();\r\nconst TRANSITION_DURATION_DRAG = 200; // ms\r\nconst TRANSITION_DURATION_DROP = 1500; // ms\r\nconst CLASSNAME_ADD_INTERVAL = 20; // ms\r\n\r\nexport class DetailsColumnBase extends BaseComponent<IDetailsColumnProps> {\r\n  private _root: any;\r\n  private _dragDropSubscription: IDisposable;\r\n  private _classNames: IClassNames<IDetailsColumnStyles>;\r\n\r\n  constructor(props: IDetailsColumnProps) {\r\n    super(props);\r\n\r\n    this._root = React.createRef();\r\n    this._onDragStart = this._onDragStart.bind(this);\r\n    this._onDragEnd = this._onDragEnd.bind(this);\r\n    this._onRootMouseDown = this._onRootMouseDown.bind(this);\r\n    this._updateHeaderDragInfo = this._updateHeaderDragInfo.bind(this);\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { column, columnIndex, parentId, isDraggable, styles, theme, cellStyleProps = DEFAULT_CELL_STYLE_PROPS } = this.props;\r\n    const { onRenderColumnHeaderTooltip = this._onRenderColumnHeaderTooltip } = this.props;\r\n\r\n    this._classNames = getClassNames(styles, {\r\n      theme: theme!,\r\n      headerClassName: column.headerClassName,\r\n      iconClassName: column.iconClassName,\r\n      isActionable: column.columnActionsMode !== ColumnActionsMode.disabled,\r\n      isEmpty: !column.name,\r\n      isIconVisible: column.isSorted || column.isGrouped || column.isFiltered,\r\n      isPadded: column.isPadded,\r\n      isIconOnly: column.isIconOnly,\r\n      cellStyleProps,\r\n      transitionDurationDrag: TRANSITION_DURATION_DRAG,\r\n      transitionDurationDrop: TRANSITION_DURATION_DROP\r\n    });\r\n\r\n    const classNames = this._classNames;\r\n\r\n    return (\r\n      <>\r\n        <div\r\n          key={column.key}\r\n          ref={this._root}\r\n          role={'columnheader'}\r\n          aria-sort={column.isSorted ? (column.isSortedDescending ? 'descending' : 'ascending') : 'none'}\r\n          aria-colindex={columnIndex}\r\n          className={classNames.root}\r\n          data-is-draggable={isDraggable}\r\n          draggable={isDraggable}\r\n          style={{\r\n            width:\r\n              column.calculatedWidth! +\r\n              cellStyleProps.cellLeftPadding +\r\n              cellStyleProps.cellRightPadding +\r\n              (column.isPadded ? cellStyleProps.cellExtraRightPadding : 0)\r\n          }}\r\n          data-automationid={'ColumnsHeaderColumn'}\r\n          data-item-key={column.key}\r\n        >\r\n          {isDraggable && <Icon iconName=\"GripperBarVertical\" className={classNames.gripperBarVerticalStyle} />}\r\n          {onRenderColumnHeaderTooltip(\r\n            {\r\n              hostClassName: classNames.cellTooltip,\r\n              id: `${parentId}-${column.key}-tooltip`,\r\n              setAriaDescribedBy: false,\r\n              content: column.columnActionsMode !== ColumnActionsMode.disabled ? column.ariaLabel : '',\r\n              children: (\r\n                <span\r\n                  id={`${parentId}-${column.key}`}\r\n                  aria-label={column.isIconOnly ? column.name : undefined}\r\n                  aria-labelledby={column.isIconOnly ? undefined : `${parentId}-${column.key}-name`}\r\n                  className={classNames.cellTitle}\r\n                  data-is-focusable={column.columnActionsMode !== ColumnActionsMode.disabled}\r\n                  role={\r\n                    column.columnActionsMode !== ColumnActionsMode.disabled &&\r\n                    (column.onColumnClick !== undefined || this.props.onColumnClick !== undefined)\r\n                      ? 'button'\r\n                      : undefined\r\n                  }\r\n                  aria-describedby={\r\n                    !this.props.onRenderColumnHeaderTooltip && this._hasAccessibleLabel() ? `${parentId}-${column.key}-tooltip` : undefined\r\n                  }\r\n                  onContextMenu={this._onColumnContextMenu.bind(this, column)}\r\n                  onClick={this._onColumnClick.bind(this, column)}\r\n                  aria-haspopup={column.columnActionsMode === ColumnActionsMode.hasDropdown}\r\n                  aria-expanded={\r\n                    column.columnActionsMode === ColumnActionsMode.hasDropdown ? (column.isMenuOpen ? true : false) : undefined\r\n                  }\r\n                >\r\n                  <span id={`${parentId}-${column.key}-name`} className={classNames.cellName}>\r\n                    {(column.iconName || column.iconClassName) && <Icon className={classNames.iconClassName} iconName={column.iconName} />}\r\n\r\n                    {column.isIconOnly ? <span className={classNames.accessibleLabel}>{column.name}</span> : column.name}\r\n                  </span>\r\n\r\n                  {column.isFiltered && <Icon className={classNames.nearIcon} iconName={'Filter'} />}\r\n\r\n                  {column.isSorted && <Icon className={classNames.sortIcon} iconName={column.isSortedDescending ? 'SortDown' : 'SortUp'} />}\r\n\r\n                  {column.isGrouped && <Icon className={classNames.nearIcon} iconName={'GroupedDescending'} />}\r\n\r\n                  {column.columnActionsMode === ColumnActionsMode.hasDropdown && !column.isIconOnly && (\r\n                    <Icon aria-hidden={true} className={classNames.filterChevron} iconName={'ChevronDown'} />\r\n                  )}\r\n                </span>\r\n              )\r\n            },\r\n            this._onRenderColumnHeaderTooltip\r\n          )}\r\n        </div>\r\n        {!this.props.onRenderColumnHeaderTooltip ? this._renderAccessibleLabel() : null}\r\n      </>\r\n    );\r\n  }\r\n\r\n  public componentDidMount(): void {\r\n    if (this._dragDropSubscription) {\r\n      this._dragDropSubscription.dispose();\r\n      delete this._dragDropSubscription;\r\n    }\r\n\r\n    if (this.props.dragDropHelper && this.props.isDraggable) {\r\n      this._dragDropSubscription = this.props.dragDropHelper.subscribe(\r\n        this._root.current as HTMLElement,\r\n        this._events,\r\n        this._getColumnDragDropOptions()\r\n      );\r\n\r\n      // We need to use native on this to avoid MarqueeSelection from handling the event before us.\r\n      this._events.on(this._root.current, 'mousedown', this._onRootMouseDown);\r\n    }\r\n\r\n    const classNames = this._classNames;\r\n\r\n    if (this.props.isDropped) {\r\n      if (this._root.current) {\r\n        this._root.current.classList.add(classNames.borderAfterDropping);\r\n\r\n        this._async.setTimeout(() => {\r\n          if (this._root.current) {\r\n            this._root.current.classList.add(classNames.noBorderAfterDropping);\r\n          }\r\n        }, CLASSNAME_ADD_INTERVAL);\r\n      }\r\n\r\n      this._async.setTimeout(() => {\r\n        if (this._root.current) {\r\n          this._root.current.classList.remove(classNames.borderAfterDropping);\r\n          this._root.current.classList.remove(classNames.noBorderAfterDropping);\r\n        }\r\n      }, TRANSITION_DURATION_DROP + CLASSNAME_ADD_INTERVAL);\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount(): void {\r\n    if (this._dragDropSubscription) {\r\n      this._dragDropSubscription.dispose();\r\n      delete this._dragDropSubscription;\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate(): void {\r\n    if (!this._dragDropSubscription && this.props.dragDropHelper && this.props.isDraggable) {\r\n      this._dragDropSubscription = this.props.dragDropHelper.subscribe(\r\n        this._root.current as HTMLElement,\r\n        this._events,\r\n        this._getColumnDragDropOptions()\r\n      );\r\n\r\n      // We need to use native on this to avoid MarqueeSelection from handling the event before us.\r\n      this._events.on(this._root.current, 'mousedown', this._onRootMouseDown);\r\n    }\r\n    if (this._dragDropSubscription && !this.props.isDraggable) {\r\n      this._dragDropSubscription.dispose();\r\n      this._events.off(this._root.current, 'mousedown');\r\n      delete this._dragDropSubscription;\r\n    }\r\n  }\r\n\r\n  private _onRenderColumnHeaderTooltip = (\r\n    tooltipHostProps: ITooltipHostProps,\r\n    defaultRender?: IRenderFunction<ITooltipHostProps>\r\n  ): JSX.Element => {\r\n    return <span className={tooltipHostProps.hostClassName}>{tooltipHostProps.children}</span>;\r\n  };\r\n\r\n  private _onColumnClick(column: IColumn, ev: React.MouseEvent<HTMLElement>): void {\r\n    if (column.columnActionsMode === ColumnActionsMode.disabled) {\r\n      return;\r\n    }\r\n\r\n    const { onColumnClick } = this.props;\r\n\r\n    if (column.onColumnClick) {\r\n      column.onColumnClick(ev, column);\r\n    }\r\n\r\n    if (onColumnClick) {\r\n      onColumnClick(ev, column);\r\n    }\r\n  }\r\n\r\n  private _getColumnDragDropOptions(): IDragDropOptions {\r\n    const { columnIndex } = this.props;\r\n    const options = {\r\n      selectionIndex: columnIndex,\r\n      context: { data: columnIndex, index: columnIndex },\r\n      canDrag: () => this.props.isDraggable!,\r\n      canDrop: () => false,\r\n      onDragStart: this._onDragStart,\r\n      updateDropState: () => undefined,\r\n      onDrop: () => undefined,\r\n      onDragEnd: this._onDragEnd\r\n    };\r\n    return options;\r\n  }\r\n\r\n  private _hasAccessibleLabel(): boolean {\r\n    const { column } = this.props;\r\n\r\n    return !!(\r\n      column.ariaLabel ||\r\n      column.filterAriaLabel ||\r\n      column.sortAscendingAriaLabel ||\r\n      column.sortDescendingAriaLabel ||\r\n      column.groupAriaLabel\r\n    );\r\n  }\r\n\r\n  private _renderAccessibleLabel(): JSX.Element | null {\r\n    const { column, parentId } = this.props;\r\n    const classNames = this._classNames;\r\n\r\n    return this._hasAccessibleLabel() && !this.props.onRenderColumnHeaderTooltip ? (\r\n      <label key={`${column.key}_label`} id={`${parentId}-${column.key}-tooltip`} className={classNames.accessibleLabel}>\r\n        {column.ariaLabel}\r\n        {(column.isFiltered && column.filterAriaLabel) || null}\r\n        {(column.isSorted && (column.isSortedDescending ? column.sortDescendingAriaLabel : column.sortAscendingAriaLabel)) || null}\r\n        {(column.isGrouped && column.groupAriaLabel) || null}\r\n      </label>\r\n    ) : null;\r\n  }\r\n\r\n  private _onDragStart(item?: any, itemIndex?: number, selectedItems?: any[], event?: MouseEvent): void {\r\n    const classNames = this._classNames;\r\n    if (itemIndex) {\r\n      this._updateHeaderDragInfo(itemIndex);\r\n      this._root.current.classList.add(classNames.borderWhileDragging);\r\n      this._async.setTimeout(() => {\r\n        if (this._root.current) {\r\n          this._root.current.classList.add(classNames.noBorderWhileDragging);\r\n        }\r\n      }, CLASSNAME_ADD_INTERVAL);\r\n    }\r\n  }\r\n\r\n  private _onDragEnd(item?: any, event?: MouseEvent): void {\r\n    const classNames = this._classNames;\r\n    if (event) {\r\n      this._updateHeaderDragInfo(-1, event);\r\n    }\r\n    this._root.current.classList.remove(classNames.borderWhileDragging);\r\n    this._root.current.classList.remove(classNames.noBorderWhileDragging);\r\n  }\r\n\r\n  private _updateHeaderDragInfo(itemIndex: number, event?: MouseEvent) {\r\n    if (this.props.setDraggedItemIndex) {\r\n      this.props.setDraggedItemIndex(itemIndex);\r\n    }\r\n    if (this.props.updateDragInfo) {\r\n      this.props.updateDragInfo({ itemIndex }, event);\r\n    }\r\n  }\r\n\r\n  private _onColumnContextMenu(column: IColumn, ev: React.MouseEvent<HTMLElement>): void {\r\n    const { onColumnContextMenu } = this.props;\r\n    if (column.onColumnContextMenu) {\r\n      column.onColumnContextMenu(column, ev);\r\n      ev.preventDefault();\r\n    }\r\n    if (onColumnContextMenu) {\r\n      onColumnContextMenu(column, ev);\r\n      ev.preventDefault();\r\n    }\r\n  }\r\n\r\n  private _onRootMouseDown = (ev: MouseEvent): void => {\r\n    const { isDraggable } = this.props;\r\n    // Ignore anything except the primary button.\r\n    if (isDraggable && ev.button === MOUSEDOWN_PRIMARY_BUTTON) {\r\n      ev.stopPropagation();\r\n    }\r\n  };\r\n}\r\n"]}