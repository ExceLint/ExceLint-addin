{"version":3,"file":"ShimmeredDetailsList.base.js","sourceRoot":"../src/","sources":["components/DetailsList/ShimmeredDetailsList.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\n\r\nimport { BaseComponent, css, classNamesFunction } from '../../Utilities';\r\nimport { SelectionMode } from '../../utilities/selection/interfaces';\r\nimport { DetailsList } from './DetailsList';\r\nimport { IDetailsRowProps } from './DetailsRow';\r\nimport { Shimmer, ShimmerElementsGroup, ShimmerElementType, IShimmerElement } from '../../Shimmer';\r\nimport { IShimmeredDetailsListProps, IShimmeredDetailsListStyleProps, IShimmeredDetailsListStyles } from './ShimmeredDetailsList.types';\r\nimport { CheckboxVisibility } from './DetailsList.types';\r\n\r\nimport { IDetailsRowStyleProps, IDetailsRowStyles } from './DetailsRow.types';\r\nimport { DEFAULT_CELL_STYLE_PROPS, DEFAULT_ROW_HEIGHTS, getStyles as getRowStyles } from './DetailsRow.styles';\r\n\r\nconst getRowClassNames = classNamesFunction<IDetailsRowStyleProps, IDetailsRowStyles>();\r\n\r\nconst getClassNames = classNamesFunction<IShimmeredDetailsListStyleProps, IShimmeredDetailsListStyles>();\r\n\r\nconst SHIMMER_INITIAL_ITEMS = 10;\r\nconst DEFAULT_SHIMMER_HEIGHT = 7;\r\nconst SHIMMER_LINE_VS_CELL_WIDTH_RATIO = 0.95;\r\n\r\nexport class ShimmeredDetailsListBase extends BaseComponent<IShimmeredDetailsListProps, {}> {\r\n  private _shimmerItems: null[];\r\n\r\n  constructor(props: IShimmeredDetailsListProps) {\r\n    super(props);\r\n\r\n    this._shimmerItems = props.shimmerLines ? new Array(props.shimmerLines) : new Array(SHIMMER_INITIAL_ITEMS);\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { items, listProps, styles, theme, shimmerLines, onRenderCustomPlaceholder, enableShimmer, ...detailsListProps } = this.props;\r\n\r\n    // Adds to the optional listProp classname a fading out overlay classname only when shimmer enabled.\r\n    const classNames = getClassNames(styles, {\r\n      theme: theme!,\r\n      className: listProps && listProps.className,\r\n      enableShimmer\r\n    });\r\n\r\n    const newListProps = { ...listProps, className: classNames.root };\r\n\r\n    return (\r\n      <DetailsList\r\n        {...detailsListProps}\r\n        enableShimmer={enableShimmer}\r\n        items={enableShimmer ? this._shimmerItems : items}\r\n        onRenderMissingItem={this._onRenderShimmerPlaceholder}\r\n        listProps={newListProps}\r\n      />\r\n    );\r\n  }\r\n\r\n  private _onRenderShimmerPlaceholder = (index: number, rowProps: IDetailsRowProps): React.ReactNode => {\r\n    const { onRenderCustomPlaceholder, compact } = this.props;\r\n    const { selectionMode, checkboxVisibility } = rowProps;\r\n\r\n    const theme = this.props.theme!;\r\n\r\n    const showCheckbox = selectionMode !== SelectionMode.none && checkboxVisibility !== CheckboxVisibility.hidden;\r\n\r\n    const rowStyleProps = {\r\n      ...rowProps,\r\n      theme: theme\r\n    };\r\n\r\n    const rowClassNames = getRowClassNames(getRowStyles(rowStyleProps), {\r\n      theme: theme\r\n    });\r\n\r\n    const placeholderElements: React.ReactNode = onRenderCustomPlaceholder\r\n      ? onRenderCustomPlaceholder()\r\n      : this._renderDefaultShimmerPlaceholder(rowProps);\r\n\r\n    return (\r\n      <div className={css(showCheckbox && rowClassNames.shimmerLeftBorder, !compact && rowClassNames.shimmerBottomBorder)}>\r\n        <Shimmer customElementsGroup={placeholderElements} />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  private _renderDefaultShimmerPlaceholder = (rowProps: IDetailsRowProps): React.ReactNode => {\r\n    const { columns, compact, cellStyleProps = DEFAULT_CELL_STYLE_PROPS } = rowProps;\r\n    const shimmerElementsRow: JSX.Element[] = [];\r\n    const { rowHeight, compactRowHeight } = DEFAULT_ROW_HEIGHTS;\r\n    const gapHeight: number = compact ? compactRowHeight : rowHeight;\r\n\r\n    columns.map((column, columnIdx) => {\r\n      const shimmerElements: IShimmerElement[] = [];\r\n      const groupWidth: number =\r\n        cellStyleProps.cellLeftPadding +\r\n        cellStyleProps.cellRightPadding +\r\n        column.calculatedWidth! +\r\n        (column.isPadded ? cellStyleProps.cellExtraRightPadding : 0);\r\n\r\n      shimmerElements.push({\r\n        type: ShimmerElementType.gap,\r\n        width: cellStyleProps.cellLeftPadding,\r\n        height: gapHeight\r\n      });\r\n\r\n      if (column.isIconOnly) {\r\n        shimmerElements.push({\r\n          type: ShimmerElementType.line,\r\n          width: column.calculatedWidth!,\r\n          height: column.calculatedWidth!\r\n        });\r\n        shimmerElements.push({\r\n          type: ShimmerElementType.gap,\r\n          width: cellStyleProps.cellRightPadding,\r\n          height: gapHeight\r\n        });\r\n      } else {\r\n        shimmerElements.push({\r\n          type: ShimmerElementType.line,\r\n          width: column.calculatedWidth! * SHIMMER_LINE_VS_CELL_WIDTH_RATIO,\r\n          height: DEFAULT_SHIMMER_HEIGHT\r\n        });\r\n        shimmerElements.push({\r\n          type: ShimmerElementType.gap,\r\n          width:\r\n            cellStyleProps.cellRightPadding +\r\n            (column.calculatedWidth! - column.calculatedWidth! * SHIMMER_LINE_VS_CELL_WIDTH_RATIO) +\r\n            (column.isPadded ? cellStyleProps.cellExtraRightPadding : 0),\r\n          height: gapHeight\r\n        });\r\n      }\r\n      shimmerElementsRow.push(<ShimmerElementsGroup key={columnIdx} width={`${groupWidth}px`} shimmerElements={shimmerElements} />);\r\n    });\r\n    // When resizing the window from narrow to wider, we need to cover the exposed Shimmer wave until the column resizing logic is done.\r\n    shimmerElementsRow.push(\r\n      <ShimmerElementsGroup\r\n        key={'endGap'}\r\n        width={'100%'}\r\n        shimmerElements={[{ type: ShimmerElementType.gap, width: '100%', height: gapHeight }]}\r\n      />\r\n    );\r\n    return <div style={{ display: 'flex' }}>{shimmerElementsRow}</div>;\r\n  };\r\n}\r\n"]}