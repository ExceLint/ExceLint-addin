{"version":3,"file":"BasePicker.js","sourceRoot":"../src/","sources":["components/pickers/BasePicker.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Async,\n  KeyCodes,\n  css,\n  elementContains,\n  getId,\n  classNamesFunction,\n  styled,\n  initializeComponentRef,\n} from '../../Utilities';\nimport { IProcessedStyleSet } from '../../Styling';\nimport { IFocusZone, FocusZone, FocusZoneDirection } from '../../FocusZone';\nimport { Callout, DirectionalHint } from '../../Callout';\nimport { Selection, SelectionZone, SelectionMode } from '../../utilities/selection/index';\nimport { Suggestions } from './Suggestions/Suggestions';\nimport {\n  ISuggestions,\n  ISuggestionsProps,\n  ISuggestionsStyleProps,\n  ISuggestionsStyles,\n} from './Suggestions/Suggestions.types';\nimport { getStyles as suggestionsStyles } from './Suggestions/Suggestions.styles';\nimport { SuggestionsController } from './Suggestions/SuggestionsController';\nimport {\n  IBasePicker,\n  IBasePickerProps,\n  ValidationState,\n  IBasePickerStyleProps,\n  IBasePickerStyles,\n} from './BasePicker.types';\nimport { IAutofill, Autofill } from '../Autofill/index';\nimport { IPickerItemProps } from './PickerItem.types';\nimport * as stylesImport from './BasePicker.scss';\nconst legacyStyles: any = stylesImport;\n\nexport interface IBasePickerState {\n  items?: any;\n  suggestedDisplayValue?: string;\n  moreSuggestionsAvailable?: boolean;\n  isFocused?: boolean;\n  isSearching?: boolean;\n  isMostRecentlyUsedVisible?: boolean;\n  suggestionsVisible?: boolean;\n  suggestionsLoading?: boolean;\n  isResultsFooterVisible?: boolean;\n  selectedIndices?: number[];\n}\n\n/**\n * Aria id's for internal picker components\n * {@docCategory Pickers}\n */\nexport type IPickerAriaIds = {\n  /**\n   * Aria id for selected suggestion alert component\n   */\n  selectedSuggestionAlert: string;\n  /**\n   * Aria id for selected items container component\n   */\n  selectedItems: string;\n  /**\n   * Aria id for suggestions list component\n   */\n  suggestionList: string;\n  /**\n   * Aria id for the component that has role=combobox\n   */\n  combobox: string;\n};\n\nconst getClassNames = classNamesFunction<IBasePickerStyleProps, IBasePickerStyles>();\n\n/**\n * Should be removed once new picker without inheritance is created\n */\nfunction getStyledSuggestions<T>(suggestionsType: new (props: ISuggestionsProps<T>) => Suggestions<T>) {\n  return styled<ISuggestionsProps<any>, ISuggestionsStyleProps, ISuggestionsStyles>(\n    suggestionsType,\n    suggestionsStyles,\n    undefined,\n    {\n      scope: 'Suggestions',\n    },\n  );\n}\n\n/**\n * {@docCategory Pickers}\n */\nexport class BasePicker<T, P extends IBasePickerProps<T>> extends React.Component<P, IBasePickerState>\n  implements IBasePicker<T> {\n  // Refs\n  protected root = React.createRef<HTMLDivElement>();\n  protected input = React.createRef<IAutofill>();\n  protected focusZone = React.createRef<IFocusZone>();\n  protected suggestionElement = React.createRef<ISuggestions<T>>();\n\n  protected selection: Selection;\n  protected suggestionStore: SuggestionsController<T>;\n  /**\n   * @deprecated this is no longer necessary as typescript now supports generic elements\n   */\n  protected SuggestionOfProperType = Suggestions as new (props: ISuggestionsProps<T>) => Suggestions<T>;\n  protected currentPromise: PromiseLike<any> | undefined;\n  protected _ariaMap: IPickerAriaIds;\n  // eslint-disable-next-line deprecation/deprecation\n  private _styledSuggestions = getStyledSuggestions(this.SuggestionOfProperType);\n  private _id: string;\n  private _async: Async;\n\n  public static getDerivedStateFromProps(newProps: IBasePickerProps<any>) {\n    if (newProps.selectedItems) {\n      return { items: newProps.selectedItems };\n    }\n    return null;\n  }\n\n  constructor(basePickerProps: P) {\n    super(basePickerProps);\n\n    initializeComponentRef(this);\n    this._async = new Async(this);\n\n    const items: T[] = basePickerProps.selectedItems || basePickerProps.defaultSelectedItems || [];\n\n    this._id = getId();\n    this._ariaMap = {\n      selectedItems: `selected-items-${this._id}`,\n      selectedSuggestionAlert: `selected-suggestion-alert-${this._id}`,\n      suggestionList: `suggestion-list-${this._id}`,\n      combobox: `combobox-${this._id}`,\n    };\n    this.suggestionStore = new SuggestionsController<T>();\n    this.selection = new Selection({ onSelectionChanged: () => this.onSelectionChange() });\n    this.selection.setItems(items);\n    this.state = {\n      items: items,\n      suggestedDisplayValue: '',\n      isMostRecentlyUsedVisible: false,\n      moreSuggestionsAvailable: false,\n      isFocused: false,\n      isSearching: false,\n      selectedIndices: [],\n    };\n  }\n\n  public get items(): T[] {\n    return this.state.items;\n  }\n\n  public componentDidMount(): void {\n    this.selection.setItems(this.state.items);\n    this._onResolveSuggestions = this._async.debounce(this._onResolveSuggestions, this.props.resolveDelay);\n  }\n\n  public componentDidUpdate(oldProps: P, oldState: IBasePickerState) {\n    if (this.state.items && this.state.items !== oldState.items) {\n      const currentSelectedIndex = this.selection.getSelectedIndices()[0];\n      this.selection.setItems(this.state.items);\n      if (this.state.isFocused) {\n        // Reset focus and selection so that selected item stays in sync if something\n        // has been removed\n        if (this.state.items.length < oldState.items.length) {\n          this.selection.setIndexSelected(currentSelectedIndex, true, true);\n          this.resetFocus(currentSelectedIndex);\n        }\n      }\n    }\n  }\n\n  public componentWillUnmount(): void {\n    if (this.currentPromise) {\n      this.currentPromise = undefined;\n    }\n    this._async.dispose();\n  }\n\n  public focus() {\n    if (this.focusZone.current) {\n      this.focusZone.current.focus();\n    }\n  }\n\n  public focusInput() {\n    if (this.input.current) {\n      this.input.current.focus();\n    }\n  }\n\n  public dismissSuggestions = (ev?: any): void => {\n    const selectItemFunction = () => {\n      let addItemOnDismiss: boolean | void = true;\n      if (this.props.onDismiss) {\n        addItemOnDismiss = this.props.onDismiss(\n          ev,\n          this.suggestionStore.currentSuggestion ? this.suggestionStore.currentSuggestion.item : undefined,\n        );\n      }\n\n      if (!ev || (ev && !ev.defaultPrevented)) {\n        // Select the first suggestion if one is available and permitted by onDismiss when user leaves.\n        if (\n          addItemOnDismiss !== false &&\n          this.canAddItems() &&\n          this.suggestionStore.hasSelectedSuggestion() &&\n          this.state.suggestedDisplayValue\n        ) {\n          this.addItemByIndex(0);\n        }\n      }\n    };\n\n    if (this.currentPromise) {\n      this.currentPromise.then(() => selectItemFunction());\n    } else {\n      selectItemFunction();\n    }\n\n    this.setState({ suggestionsVisible: false });\n  };\n\n  public completeSuggestion(forceComplete?: boolean) {\n    if (this.suggestionStore.hasSelectedSuggestion() && this.input.current) {\n      this.completeSelection(this.suggestionStore.currentSuggestion!.item);\n    } else if (forceComplete) {\n      this._completeGenericSuggestion();\n    }\n  }\n\n  public refocusSuggestions = (keyCode: KeyCodes): void => {\n    this.resetFocus();\n    if (this.suggestionStore.suggestions && this.suggestionStore.suggestions.length > 0) {\n      if (keyCode === KeyCodes.up) {\n        this.suggestionStore.setSelectedSuggestion(this.suggestionStore.suggestions.length - 1);\n      } else if (keyCode === KeyCodes.down) {\n        this.suggestionStore.setSelectedSuggestion(0);\n      }\n    }\n  };\n\n  public render(): JSX.Element {\n    const { suggestedDisplayValue, isFocused, items } = this.state;\n    const { className, inputProps, disabled, theme, styles } = this.props;\n\n    const selectedSuggestionAlertId = this.props.enableSelectedSuggestionAlert\n      ? this._ariaMap.selectedSuggestionAlert\n      : '';\n    const suggestionsAvailable = this.state.suggestionsVisible ? this._ariaMap.suggestionList : '';\n\n    // TODO\n    // Clean this up by leaving only the first part after removing support for SASS.\n    // Currently we can not remove the SASS styles from BasePicker class because it\n    // might be used by consumers who created custom pickers from extending from\n    // this base class and have not used the new 'styles' prop.\n    // We check for 'styles' prop which is going to be injected by the 'styled' HOC\n    // for every other already existing picker variant (PeoplePicker, TagPicker)\n    // so that we can use the CSS-in-JS styles. If the check fails (ex: custom picker),\n    // then we just use the old SASS styles instead.\n    const classNames: Partial<IProcessedStyleSet<IBasePickerStyles>> = styles\n      ? getClassNames(styles, {\n          theme,\n          className,\n          isFocused,\n          disabled,\n          inputClassName: inputProps && inputProps.className,\n        })\n      : {\n          root: css('ms-BasePicker', className ? className : ''),\n          text: css('ms-BasePicker-text', legacyStyles.pickerText, this.state.isFocused && legacyStyles.inputFocused),\n          itemsWrapper: legacyStyles.pickerItems,\n          input: css('ms-BasePicker-input', legacyStyles.pickerInput, inputProps && inputProps.className),\n          screenReaderText: legacyStyles.screenReaderOnly,\n        };\n\n    return (\n      <div ref={this.root} className={classNames.root} onKeyDown={this.onKeyDown} onBlur={this.onBlur}>\n        <FocusZone\n          componentRef={this.focusZone}\n          direction={FocusZoneDirection.bidirectional}\n          shouldEnterInnerZone={this._shouldFocusZoneEnterInnerZone}\n          role={'combobox'}\n          id={this._ariaMap.combobox}\n          aria-label={this.props['aria-label']}\n          aria-expanded={!!this.state.suggestionsVisible}\n          aria-owns={suggestionsAvailable || undefined}\n          // Dialog is an acceptable child of a combobox according to the aria specs: https://www.w3.org/TR/wai-aria-practices/#combobox\n          // Currently accessibility insights will flag this as not a valid child because the AXE rules are\n          // out of date. Tracking issue: https://github.com/dequelabs/axe-core/issues/1009\n          aria-haspopup={suggestionsAvailable && this.suggestionStore.suggestions.length > 0 ? 'listbox' : 'dialog'}\n        >\n          {this.getSuggestionsAlert(classNames.screenReaderText)}\n          <SelectionZone selection={this.selection} selectionMode={SelectionMode.multiple}>\n            <div className={classNames.text}>\n              {items.length > 0 && (\n                <span id={this._ariaMap.selectedItems} className={classNames.itemsWrapper} role={'list'}>\n                  {this.renderItems()}\n                </span>\n              )}\n              {this.canAddItems() && (\n                <Autofill\n                  spellCheck={false}\n                  {...(inputProps as any)}\n                  className={classNames.input}\n                  componentRef={this.input}\n                  onClick={this.onClick}\n                  onFocus={this.onInputFocus}\n                  onBlur={this.onInputBlur}\n                  onInputValueChange={this.onInputChange}\n                  suggestedDisplayValue={suggestedDisplayValue}\n                  arial-labelledby={this.props['aria-label'] ? this._ariaMap.combobox : undefined}\n                  aria-describedby={items.length > 0 ? this._ariaMap.selectedItems : undefined}\n                  aria-controls={`${suggestionsAvailable} ${selectedSuggestionAlertId}` || undefined}\n                  aria-activedescendant={this.getActiveDescendant()}\n                  role={'textbox'}\n                  disabled={disabled}\n                  onInputChange={this.props.onInputChange}\n                />\n              )}\n            </div>\n          </SelectionZone>\n        </FocusZone>\n        {this.renderSuggestions()}\n      </div>\n    );\n  }\n\n  protected canAddItems(): boolean {\n    const { items } = this.state;\n    const { itemLimit } = this.props;\n    return itemLimit === undefined || items.length < itemLimit;\n  }\n\n  protected renderSuggestions(): JSX.Element | null {\n    const StyledTypedSuggestions: React.FunctionComponent<ISuggestionsProps<T>> = this._styledSuggestions;\n\n    return this.state.suggestionsVisible && this.input ? (\n      <Callout\n        isBeakVisible={false}\n        gapSpace={5}\n        target={this.input.current ? this.input.current.inputElement : undefined}\n        onDismiss={this.dismissSuggestions}\n        directionalHint={DirectionalHint.bottomLeftEdge}\n        directionalHintForRTL={DirectionalHint.bottomRightEdge}\n        {...this.props.pickerCalloutProps}\n      >\n        <StyledTypedSuggestions\n          // Assumed to set in derived component's defaultProps\n          onRenderSuggestion={this.props.onRenderSuggestionsItem!}\n          onSuggestionClick={this.onSuggestionClick}\n          onSuggestionRemove={this.onSuggestionRemove}\n          suggestions={this.suggestionStore.getSuggestions()}\n          componentRef={this.suggestionElement}\n          onGetMoreResults={this.onGetMoreResults}\n          moreSuggestionsAvailable={this.state.moreSuggestionsAvailable}\n          isLoading={this.state.suggestionsLoading}\n          isSearching={this.state.isSearching}\n          isMostRecentlyUsedVisible={this.state.isMostRecentlyUsedVisible}\n          isResultsFooterVisible={this.state.isResultsFooterVisible}\n          refocusSuggestions={this.refocusSuggestions}\n          removeSuggestionAriaLabel={this.props.removeButtonAriaLabel}\n          suggestionsListId={this._ariaMap.suggestionList}\n          createGenericItem={this._completeGenericSuggestion}\n          {...this.props.pickerSuggestionsProps}\n        />\n      </Callout>\n    ) : null;\n  }\n\n  protected renderItems(): JSX.Element[] {\n    const { disabled, removeButtonAriaLabel } = this.props;\n    const onRenderItem = this.props.onRenderItem as (props: IPickerItemProps<T>) => JSX.Element;\n\n    const { items, selectedIndices } = this.state;\n    return items.map((item: any, index: number) =>\n      onRenderItem({\n        item,\n        index,\n        key: item.key ? item.key : index,\n        selected: selectedIndices!.indexOf(index) !== -1,\n        onRemoveItem: () => this.removeItem(item, true),\n        disabled: disabled,\n        onItemChange: this.onItemChange,\n        removeButtonAriaLabel: removeButtonAriaLabel,\n      }),\n    );\n  }\n\n  protected resetFocus(index?: number) {\n    const { items } = this.state;\n\n    if (items.length && index! >= 0) {\n      const newEl: HTMLElement | null =\n        this.root.current &&\n        (this.root.current.querySelectorAll('[data-selection-index]')[\n          Math.min(index!, items.length - 1)\n        ] as HTMLElement | null);\n      if (newEl && this.focusZone.current) {\n        this.focusZone.current.focusElement(newEl);\n      }\n    } else if (!this.canAddItems()) {\n      this.resetFocus(items.length - 1);\n    } else {\n      if (this.input.current) {\n        this.input.current.focus();\n      }\n    }\n  }\n\n  protected onSuggestionSelect() {\n    if (this.suggestionStore.currentSuggestion) {\n      const currentValue: string = this.input.current ? this.input.current.value : '';\n      const itemValue: string = this._getTextFromItem(this.suggestionStore.currentSuggestion.item, currentValue);\n      this.setState({ suggestedDisplayValue: itemValue });\n    }\n  }\n\n  protected onSelectionChange() {\n    this.setState({\n      selectedIndices: this.selection.getSelectedIndices(),\n    });\n  }\n\n  protected updateSuggestions(suggestions: any[]) {\n    this.suggestionStore.updateSuggestions(suggestions, 0);\n    this.forceUpdate();\n  }\n\n  /**\n   * Only to be called when there is nothing in the input. Checks to see if the consumer has\n   * provided a function to resolve suggestions\n   */\n  protected onEmptyInputFocus() {\n    const emptyResolveSuggestions = this.props.onEmptyResolveSuggestions\n      ? this.props.onEmptyResolveSuggestions\n      : // eslint-disable-next-line deprecation/deprecation\n        this.props.onEmptyInputFocus;\n\n    // Only attempt to resolve suggestions if it exists\n    if (emptyResolveSuggestions) {\n      const suggestions = emptyResolveSuggestions(this.state.items);\n\n      this.updateSuggestionsList(suggestions);\n\n      this.setState({\n        isMostRecentlyUsedVisible: true,\n        suggestionsVisible: true,\n        moreSuggestionsAvailable: false,\n      });\n    }\n  }\n\n  protected updateValue(updatedValue: string) {\n    this._onResolveSuggestions(updatedValue);\n  }\n\n  protected updateSuggestionsList(suggestions: T[] | PromiseLike<T[]>, updatedValue?: string) {\n    const suggestionsArray: T[] = suggestions as T[];\n    const suggestionsPromiseLike: PromiseLike<T[]> = suggestions as PromiseLike<T[]>;\n\n    // Check to see if the returned value is an array, if it is then just pass it into the next function .\n    // If the returned value is not an array then check to see if it's a promise or PromiseLike.\n    // If it is then resolve it asynchronously.\n    if (Array.isArray(suggestionsArray)) {\n      this._updateAndResolveValue(updatedValue, suggestionsArray);\n    } else if (suggestionsPromiseLike && suggestionsPromiseLike.then) {\n      this.setState({\n        suggestionsLoading: true,\n      });\n\n      // Clear suggestions\n      this.suggestionStore.updateSuggestions([]);\n\n      if (updatedValue !== undefined) {\n        this.setState({\n          suggestionsVisible: this._getShowSuggestions(),\n        });\n      } else {\n        this.setState({\n          suggestionsVisible: this.input.current! && this.input.current!.inputElement === document.activeElement,\n        });\n      }\n\n      // Ensure that the promise will only use the callback if it was the most recent one.\n      const promise: PromiseLike<T[]> = (this.currentPromise = suggestionsPromiseLike);\n      promise.then((newSuggestions: T[]) => {\n        if (promise === this.currentPromise) {\n          this._updateAndResolveValue(updatedValue, newSuggestions);\n        }\n      });\n    }\n  }\n\n  protected resolveNewValue(updatedValue: string, suggestions: T[]) {\n    this.updateSuggestions(suggestions);\n    let itemValue: string | undefined = undefined;\n\n    if (this.suggestionStore.currentSuggestion) {\n      itemValue = this._getTextFromItem(this.suggestionStore.currentSuggestion.item, updatedValue);\n    }\n\n    // Only set suggestionloading to false after there has been time for the new suggestions to flow\n    // to the suggestions list. This is to ensure that the suggestions are available before aria-activedescendant\n    // is set so that screen readers will read out the first selected option.\n    this.setState(\n      {\n        suggestedDisplayValue: itemValue,\n        suggestionsVisible: this._getShowSuggestions(),\n      },\n      () => this.setState({ suggestionsLoading: false }),\n    );\n  }\n\n  protected onChange(items?: T[]) {\n    if (this.props.onChange) {\n      (this.props.onChange as any)(items);\n    }\n  }\n\n  protected onInputChange = (value: string): void => {\n    this.updateValue(value);\n    this.setState({\n      moreSuggestionsAvailable: true,\n      isMostRecentlyUsedVisible: false,\n    });\n  };\n\n  protected onSuggestionClick = (ev: React.MouseEvent<HTMLElement>, item: any, index: number): void => {\n    this.addItemByIndex(index);\n  };\n\n  protected onSuggestionRemove = (ev: React.MouseEvent<HTMLElement>, item: T, index: number): void => {\n    if (this.props.onRemoveSuggestion) {\n      this.props.onRemoveSuggestion(item);\n    }\n    this.suggestionStore.removeSuggestion(index);\n  };\n\n  protected onInputFocus = (ev: React.FocusEvent<HTMLInputElement | Autofill>): void => {\n    this.selection.setAllSelected(false);\n    // Only trigger all of the focus if this component isn't already focused.\n    // For example when an item is selected or removed from the selected list it should be treated\n    // as though the input is still focused.\n    if (!this.state.isFocused) {\n      this.setState({ isFocused: true });\n\n      this._userTriggeredSuggestions();\n\n      if (this.props.inputProps && this.props.inputProps.onFocus) {\n        this.props.inputProps.onFocus(ev as React.FocusEvent<HTMLInputElement>);\n      }\n    }\n  };\n\n  protected onInputBlur = (ev: React.FocusEvent<HTMLInputElement | Autofill>): void => {\n    if (this.props.inputProps && this.props.inputProps.onBlur) {\n      this.props.inputProps.onBlur(ev as React.FocusEvent<HTMLInputElement>);\n    }\n  };\n\n  protected onBlur = (ev: React.FocusEvent<HTMLElement | Autofill>): void => {\n    if (this.state.isFocused) {\n      // Only blur the entire component if an unrelated element gets focus.\n      // Otherwise treat it as though it still has focus.\n      // Do nothing if the blur is coming from something\n      // inside the comboBox root or the comboBox menu since\n      // it we are not really bluring from the whole comboBox\n      let relatedTarget: EventTarget | null = ev.relatedTarget;\n\n      if (ev.relatedTarget === null) {\n        // In IE11, due to lack of support, event.relatedTarget is always\n        // null making every onBlur call to be \"outside\" of the ComboBox\n        // even when it's not. Using document.activeElement is another way\n        // for us to be able to get what the relatedTarget without relying\n        // on the event\n        relatedTarget = document.activeElement;\n      }\n      if (relatedTarget && !elementContains(this.root.current!, relatedTarget as HTMLElement)) {\n        this.setState({ isFocused: false });\n        if (this.props.onBlur) {\n          this.props.onBlur(ev as React.FocusEvent<HTMLInputElement>);\n        }\n      }\n    }\n  };\n\n  /**\n   * Reveals suggestions any time the user clicks on the input element\n   * without shifting focus.\n   */\n  protected onClick = (ev: React.MouseEvent<HTMLInputElement>): void => {\n    if (this.props.inputProps !== undefined && this.props.inputProps.onClick !== undefined) {\n      this.props.inputProps.onClick(ev);\n    }\n\n    // Only primary (left) clicks show suggestions.\n    if (ev.button === 0) {\n      this._userTriggeredSuggestions();\n    }\n  };\n\n  protected onKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\n    const keyCode = ev.which;\n    switch (keyCode) {\n      case KeyCodes.escape:\n        if (this.state.suggestionsVisible) {\n          this.setState({ suggestionsVisible: false });\n          ev.preventDefault();\n          ev.stopPropagation();\n        }\n        break;\n\n      case KeyCodes.tab:\n      case KeyCodes.enter:\n        if (this.suggestionElement.current && this.suggestionElement.current.hasSuggestedActionSelected()) {\n          this.suggestionElement.current.executeSelectedAction();\n        } else if (!ev.shiftKey && this.suggestionStore.hasSelectedSuggestion() && this.state.suggestionsVisible) {\n          this.completeSuggestion();\n          ev.preventDefault();\n          ev.stopPropagation();\n        } else {\n          this._completeGenericSuggestion();\n        }\n\n        break;\n\n      case KeyCodes.backspace:\n        if (!this.props.disabled) {\n          this.onBackspace(ev);\n        }\n        ev.stopPropagation();\n        break;\n\n      case KeyCodes.del:\n        if (!this.props.disabled) {\n          if (\n            this.input.current &&\n            ev.target === this.input.current.inputElement &&\n            this.state.suggestionsVisible &&\n            this.suggestionStore.currentIndex !== -1\n          ) {\n            if (this.props.onRemoveSuggestion) {\n              this.props.onRemoveSuggestion(this.suggestionStore.currentSuggestion!.item);\n            }\n            this.suggestionStore.removeSuggestion(this.suggestionStore.currentIndex);\n            this.forceUpdate();\n          } else {\n            this.onBackspace(ev);\n          }\n        }\n        ev.stopPropagation();\n        break;\n\n      case KeyCodes.up:\n        if (this.input.current && ev.target === this.input.current.inputElement && this.state.suggestionsVisible) {\n          if (\n            this.suggestionElement.current &&\n            this.suggestionElement.current.tryHandleKeyDown(keyCode, this.suggestionStore.currentIndex)\n          ) {\n            ev.preventDefault();\n            ev.stopPropagation();\n            this.forceUpdate();\n          } else {\n            if (\n              this.suggestionElement.current &&\n              this.suggestionElement.current.hasSuggestedAction() &&\n              this.suggestionStore.currentIndex === 0\n            ) {\n              ev.preventDefault();\n              ev.stopPropagation();\n              this.suggestionElement.current.focusAboveSuggestions();\n              this.suggestionStore.deselectAllSuggestions();\n              this.forceUpdate();\n            } else {\n              if (this.suggestionStore.previousSuggestion()) {\n                ev.preventDefault();\n                ev.stopPropagation();\n                this.onSuggestionSelect();\n              }\n            }\n          }\n        }\n        break;\n\n      case KeyCodes.down:\n        if (this.input.current && ev.target === this.input.current.inputElement && this.state.suggestionsVisible) {\n          if (\n            this.suggestionElement.current &&\n            this.suggestionElement.current.tryHandleKeyDown(keyCode, this.suggestionStore.currentIndex)\n          ) {\n            ev.preventDefault();\n            ev.stopPropagation();\n            this.forceUpdate();\n          } else {\n            if (\n              this.suggestionElement.current &&\n              this.suggestionElement.current.hasSuggestedAction() &&\n              this.suggestionStore.currentIndex + 1 === this.suggestionStore.suggestions.length\n            ) {\n              ev.preventDefault();\n              ev.stopPropagation();\n              this.suggestionElement.current.focusBelowSuggestions();\n              this.suggestionStore.deselectAllSuggestions();\n              this.forceUpdate();\n            } else {\n              if (this.suggestionStore.nextSuggestion()) {\n                ev.preventDefault();\n                ev.stopPropagation();\n                this.onSuggestionSelect();\n              }\n            }\n          }\n        }\n        break;\n    }\n  };\n\n  protected onItemChange = (changedItem: T, index: number): void => {\n    const { items } = this.state;\n\n    if (index >= 0) {\n      const newItems: T[] = items;\n      newItems[index] = changedItem;\n\n      this._updateSelectedItems(newItems);\n    }\n  };\n\n  protected onGetMoreResults = (): void => {\n    this.setState(\n      {\n        isSearching: true,\n      },\n      () => {\n        if (this.props.onGetMoreResults && this.input.current) {\n          const suggestions: T[] | PromiseLike<T[]> = (this.props.onGetMoreResults as any)(\n            this.input.current.value,\n            this.state.items,\n          );\n          const suggestionsArray: T[] = suggestions as T[];\n          const suggestionsPromiseLike: PromiseLike<T[]> = suggestions as PromiseLike<T[]>;\n\n          if (Array.isArray(suggestionsArray)) {\n            this.updateSuggestions(suggestionsArray);\n            this.setState({ isSearching: false });\n          } else if (suggestionsPromiseLike.then) {\n            suggestionsPromiseLike.then((newSuggestions: T[]) => {\n              this.updateSuggestions(newSuggestions);\n              this.setState({ isSearching: false });\n            });\n          }\n        } else {\n          this.setState({ isSearching: false });\n        }\n\n        if (this.input.current) {\n          this.input.current.focus();\n        }\n\n        this.setState({\n          moreSuggestionsAvailable: false,\n          isResultsFooterVisible: true,\n        });\n      },\n    );\n  };\n\n  protected completeSelection = (item: T) => {\n    this.addItem(item);\n    this.updateValue('');\n    if (this.input.current) {\n      this.input.current.clear();\n    }\n    this.setState({ suggestionsVisible: false });\n  };\n\n  protected addItemByIndex = (index: number): void => {\n    this.completeSelection(this.suggestionStore.getSuggestionAtIndex(index).item);\n  };\n\n  protected addItem = (item: T): void => {\n    const processedItem: T | PromiseLike<T> | null = this.props.onItemSelected\n      ? (this.props.onItemSelected as any)(item)\n      : item;\n\n    if (processedItem === null) {\n      return;\n    }\n\n    const processedItemObject: T = processedItem as T;\n    const processedItemPromiseLike: PromiseLike<T> = processedItem as PromiseLike<T>;\n\n    if (processedItemPromiseLike && processedItemPromiseLike.then) {\n      processedItemPromiseLike.then((resolvedProcessedItem: T) => {\n        const newItems: T[] = this.state.items.concat([resolvedProcessedItem]);\n        this._updateSelectedItems(newItems);\n      });\n    } else {\n      const newItems: T[] = this.state.items.concat([processedItemObject]);\n      this._updateSelectedItems(newItems);\n    }\n    this.setState({ suggestedDisplayValue: '' });\n  };\n\n  protected removeItem = (item: IPickerItemProps<T>, focusNextItem?: boolean): void => {\n    const { items } = this.state;\n    const index: number = items.indexOf(item);\n\n    if (index >= 0) {\n      const newItems: T[] = items.slice(0, index).concat(items.slice(index + 1));\n      this._updateSelectedItems(newItems);\n    }\n  };\n\n  protected removeItems = (itemsToRemove: any[]): void => {\n    const { items } = this.state;\n    const newItems: T[] = items.filter((item: any) => itemsToRemove.indexOf(item) === -1);\n\n    this._updateSelectedItems(newItems);\n  };\n\n  // This is protected because we may expect the backspace key to work differently in a different kind of picker.\n  // This lets the subclass override it and provide it's own onBackspace. For an example see the BasePickerListBelow\n  protected onBackspace(ev: React.KeyboardEvent<HTMLElement>) {\n    if (\n      (this.state.items.length && !this.input.current) ||\n      (this.input.current && !this.input.current.isValueSelected && this.input.current.cursorLocation === 0)\n    ) {\n      if (this.selection.getSelectedCount() > 0) {\n        this.removeItems(this.selection.getSelection());\n      } else {\n        this.removeItem(this.state.items[this.state.items.length - 1]);\n      }\n    }\n  }\n\n  protected _shouldFocusZoneEnterInnerZone = (ev: React.KeyboardEvent<HTMLElement>): boolean => {\n    // If suggestions are shown const up/down keys control them, otherwise allow them through to control the focusZone.\n    if (this.state.suggestionsVisible) {\n      switch (ev.which) {\n        case KeyCodes.up:\n        case KeyCodes.down:\n          return true;\n      }\n    }\n\n    if (ev.which === KeyCodes.enter) {\n      return true;\n    }\n\n    return false;\n  };\n\n  protected getActiveDescendant() {\n    if (this.state.suggestionsLoading) {\n      return undefined;\n    }\n\n    const currentIndex = this.suggestionStore.currentIndex;\n    // if the suggestions element has actions and the currentIndex does not point to a suggestion, return the action id\n    if (currentIndex < 0 && this.suggestionElement.current && this.suggestionElement.current.hasSuggestedAction()) {\n      return 'sug-selectedAction';\n    }\n\n    return currentIndex > -1 && !this.state.suggestionsLoading ? 'sug-' + currentIndex : undefined;\n  }\n\n  protected getSuggestionsAlert(suggestionAlertClassName: string = legacyStyles.screenReaderOnly) {\n    const currentIndex = this.suggestionStore.currentIndex;\n    if (this.props.enableSelectedSuggestionAlert) {\n      const selectedSuggestion =\n        currentIndex > -1 ? this.suggestionStore.getSuggestionAtIndex(this.suggestionStore.currentIndex) : undefined;\n      const selectedSuggestionAlertText = selectedSuggestion ? selectedSuggestion.ariaLabel : undefined;\n      return (\n        <div\n          className={suggestionAlertClassName}\n          role=\"alert\"\n          id={this._ariaMap.selectedSuggestionAlert}\n          aria-live=\"assertive\"\n        >\n          {selectedSuggestionAlertText}{' '}\n        </div>\n      );\n    }\n  }\n\n  /**\n   * Takes in the current updated value and either resolves it with the new suggestions\n   * or if updated value is undefined then it clears out currently suggested items\n   */\n  private _updateAndResolveValue(updatedValue: string | undefined, newSuggestions: T[]) {\n    if (updatedValue !== undefined) {\n      this.resolveNewValue(updatedValue, newSuggestions);\n    } else {\n      this.suggestionStore.updateSuggestions(newSuggestions, -1);\n      if (this.state.suggestionsLoading) {\n        this.setState({\n          suggestionsLoading: false,\n        });\n      }\n    }\n  }\n\n  /**\n   * Controls what happens whenever there is an action that impacts the selected items.\n   * If `selectedItems` is provided, this will act as a controlled component and it will not update its own state.\n   */\n  private _updateSelectedItems(items: T[]): void {\n    if (this.props.selectedItems) {\n      // If the component is a controlled component then the controlling component will need to add or remove the items.\n      this.onChange(items);\n    } else {\n      this.setState({ items: items }, () => {\n        this._onSelectedItemsUpdated(items);\n      });\n    }\n  }\n\n  private _onSelectedItemsUpdated(items?: T[]): void {\n    this.onChange(items);\n  }\n\n  /**\n   * Suggestions are normally shown after the user updates text and the text\n   * is non-empty, but also when the user clicks on the input element.\n   * @returns True if suggestions should be shown.\n   */\n  private _getShowSuggestions(): boolean {\n    const areSuggestionsVisible =\n      this.input.current !== undefined &&\n      this.input.current !== null &&\n      this.input.current.inputElement === document.activeElement &&\n      this.input.current.value !== '';\n\n    return areSuggestionsVisible;\n  }\n\n  private _onResolveSuggestions = (updatedValue: string): void => {\n    const suggestions: T[] | PromiseLike<T[]> | null = this.props.onResolveSuggestions(updatedValue, this.state.items);\n\n    if (suggestions !== null) {\n      this.updateSuggestionsList(suggestions, updatedValue);\n    }\n  };\n\n  private _completeGenericSuggestion = (): void => {\n    if (\n      this.props.onValidateInput &&\n      this.input.current &&\n      (this.props.onValidateInput as any)(this.input.current.value) !== ValidationState.invalid &&\n      this.props.createGenericItem\n    ) {\n      const itemToConvert = this.props.createGenericItem(\n        this.input.current.value,\n        this.props.onValidateInput(this.input.current.value),\n      );\n      this.suggestionStore.createGenericSuggestion(itemToConvert);\n      this.completeSuggestion();\n    }\n  };\n\n  private _getTextFromItem(item: T, currentValue?: string): string {\n    if (this.props.getTextFromItem) {\n      return (this.props.getTextFromItem as any)(item, currentValue);\n    } else {\n      return '';\n    }\n  }\n\n  /**\n   * This should be called when the user does something other than use text entry to trigger suggestions.\n   *\n   */\n  private _userTriggeredSuggestions = () => {\n    if (!this.state.suggestionsVisible) {\n      const input = this.input.current ? this.input.current.value : '';\n      if (!input) {\n        this.onEmptyInputFocus();\n      } else {\n        if (this.suggestionStore.suggestions.length === 0) {\n          this._onResolveSuggestions(input);\n        } else {\n          this.setState({\n            isMostRecentlyUsedVisible: false,\n            suggestionsVisible: true,\n          });\n        }\n      }\n    }\n  };\n}\n\nexport class BasePickerListBelow<T, P extends IBasePickerProps<T>> extends BasePicker<T, P> {\n  public render(): JSX.Element {\n    const { suggestedDisplayValue, isFocused } = this.state;\n    const { className, inputProps, disabled, theme, styles } = this.props;\n\n    const selectedSuggestionAlertId: string | undefined = this.props.enableSelectedSuggestionAlert\n      ? this._ariaMap.selectedSuggestionAlert\n      : '';\n    const suggestionsAvailable: string | undefined = this.state.suggestionsVisible ? this._ariaMap.suggestionList : '';\n\n    // TODO\n    // Clean this up by leaving only the first part after removing support for SASS.\n    // Currently we can not remove the SASS styles from BasePicker class because it\n    // might be used by consumers who created custom pickers from extending from\n    // this base class and have not used the new 'styles' prop.\n    // We check for 'styles' prop which is going to be injected by the 'styled' HOC\n    // for every other already existing picker variant (PeoplePicker, TagPicker)\n    // so that we can use the CSS-in-JS styles. If the check fails (ex: custom picker),\n    // then we just use the old SASS styles instead.\n    const classNames: Partial<IProcessedStyleSet<IBasePickerStyles>> = styles\n      ? getClassNames(styles, {\n          theme,\n          className,\n          isFocused,\n          inputClassName: inputProps && inputProps.className,\n        })\n      : {\n          root: css('ms-BasePicker', className ? className : ''),\n          text: css('ms-BasePicker-text', legacyStyles.pickerText, this.state.isFocused && legacyStyles.inputFocused),\n          input: css('ms-BasePicker-input', legacyStyles.pickerInput, inputProps && inputProps.className),\n          screenReaderText: legacyStyles.screenReaderOnly,\n        };\n\n    return (\n      <div ref={this.root} onBlur={this.onBlur}>\n        <div className={classNames.root} onKeyDown={this.onKeyDown}>\n          {this.getSuggestionsAlert(classNames.screenReaderText)}\n          <div\n            className={classNames.text}\n            aria-owns={suggestionsAvailable || undefined}\n            aria-expanded={!!this.state.suggestionsVisible}\n            // Dialog is an acceptable child of a combobox according to the aria specs: https://www.w3.org/TR/wai-aria-practices/#combobox\n            // Currently accessibility insights will flag this as not a valid child because the AXE rules are\n            // out of date. Tracking issue: https://github.com/dequelabs/axe-core/issues/1009\n            aria-haspopup={suggestionsAvailable && this.suggestionStore.suggestions.length > 0 ? 'listbox' : 'dialog'}\n            role=\"combobox\"\n          >\n            <Autofill\n              {...(inputProps as any)}\n              className={classNames.input}\n              componentRef={this.input}\n              onFocus={this.onInputFocus}\n              onBlur={this.onInputBlur}\n              onClick={this.onClick}\n              onInputValueChange={this.onInputChange}\n              suggestedDisplayValue={suggestedDisplayValue}\n              aria-activedescendant={this.getActiveDescendant()}\n              role=\"textbox\"\n              disabled={disabled}\n              aria-controls={`${suggestionsAvailable} ${selectedSuggestionAlertId}` || undefined}\n              onInputChange={this.props.onInputChange}\n            />\n          </div>\n        </div>\n        {this.renderSuggestions()}\n        <SelectionZone selection={this.selection} selectionMode={SelectionMode.single}>\n          <FocusZone\n            componentRef={this.focusZone}\n            className=\"ms-BasePicker-selectedItems\" // just a className hook without any styles applied to it.\n            isCircularNavigation={true}\n            direction={FocusZoneDirection.bidirectional}\n            shouldEnterInnerZone={this._shouldFocusZoneEnterInnerZone}\n            id={this._ariaMap.selectedItems}\n            role={'list'}\n          >\n            {this.renderItems()}\n          </FocusZone>\n        </SelectionZone>\n      </div>\n    );\n  }\n\n  protected onBackspace(ev: React.KeyboardEvent<HTMLElement>) {\n    // override the existing backspace method to not do anything because the list items appear below.\n  }\n}\n"]}