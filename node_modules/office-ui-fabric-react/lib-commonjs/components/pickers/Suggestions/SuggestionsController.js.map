{"version":3,"file":"SuggestionsController.js","sourceRoot":"../src/","sources":["components/pickers/Suggestions/SuggestionsController.ts"],"names":[],"mappings":";;AAEA;IAKE;QAAA,iBAGC;QAyGO,uBAAkB,GAAG,UAAC,KAA8B;YAC1D,OAA6B,KAAM,CAAC,IAAI,KAAK,SAAS,CAAC;QACzD,CAAC,CAAC;QAEM,2BAAsB,GAAG,UAAC,UAAmC;YACnE,IAAI,KAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,EAAE;gBACvC,OAAO,UAAiC,CAAC;aAC1C;iBAAM;gBACL,OAAO;oBACL,IAAI,EAAE,UAAU;oBAChB,QAAQ,EAAE,KAAK;oBACf,SAAS,EAAQ,UAAW,CAAC,IAAI,IAAU,UAAW,CAAC,WAAW;iBAC5C,CAAC;aAC1B;QACH,CAAC,CAAC;QAzHA,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;IACzB,CAAC;IAEM,iDAAiB,GAAxB,UAAyB,cAAmB,EAAE,aAAsB;QAClE,IAAI,cAAc,IAAI,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;YAC/C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,mCAAmC,CAAC,cAAc,CAAC,CAAC;YAC5E,IAAI,CAAC,YAAY,GAAG,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;YACtD,IAAI,aAAc,KAAK,CAAC,CAAC,EAAE;gBACzB,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;aACpC;iBAAM,IAAI,aAAa,KAAK,SAAS,EAAE;gBACtC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;gBAChD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;aAC1D;SACF;aAAM;YACL,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACtB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;SACpC;IACH,CAAC;IAED;;OAEG;IACI,8CAAc,GAArB;QACE,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YAC/C,IAAI,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;gBACnD,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;gBAClD,OAAO,IAAI,CAAC;aACb;iBAAM,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC5D,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;gBAC9B,OAAO,IAAI,CAAC;aACb;SACF;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAED;;OAEG;IACI,kDAAkB,GAAzB;QACE,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE;YAC/C,IAAI,IAAI,CAAC,YAAY,GAAG,CAAC,EAAE;gBACzB,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;gBAClD,OAAO,IAAI,CAAC;aACb;iBAAM,IAAI,IAAI,CAAC,YAAY,KAAK,CAAC,EAAE;gBAClC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBACxD,OAAO,IAAI,CAAC;aACb;SACF;QAED,OAAO,KAAK,CAAC;IACf,CAAC;IAEM,8CAAc,GAArB;QACE,OAAO,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAEM,8CAAc,GAArB;QACE,OAAO,IAAI,CAAC,iBAAkB,CAAC;IACjC,CAAC;IAEM,oDAAoB,GAA3B,UAA4B,KAAa;QACvC,OAAO,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IACjC,CAAC;IAEM,qDAAqB,GAA5B;QACE,OAAO,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC;IAC/C,CAAC;IAEM,gDAAgB,GAAvB,UAAwB,KAAa;QACnC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IACpC,CAAC;IAEM,uDAAuB,GAA9B,UAA+B,aAAsC;QACnE,IAAM,SAAS,GAAG,IAAI,CAAC,mCAAmC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/E,IAAI,CAAC,iBAAiB,GAAG,SAAS,CAAC;IACrC,CAAC;IAEM,mEAAmC,GAA1C,UAA2C,WAA2C;QACpF,OAAO,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACxF,CAAC;IAEM,sDAAsB,GAA7B;QACE,IAAI,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,EAAE;YAC1B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;YACrD,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;SACxB;IACH,CAAC;IAEM,qDAAqB,GAA5B,UAA6B,KAAa;QACxC,IAAI,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,IAAI,KAAK,GAAG,CAAC,EAAE;YACpD,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;YACtB,IAAI,CAAC,iBAAkB,CAAC,QAAQ,GAAG,KAAK,CAAC;YACzC,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YAC7C,IAAI,CAAC,iBAAiB,CAAC,QAAQ,GAAG,IAAI,CAAC;SACxC;aAAM;YACL,IAAI,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,EAAE;gBAC1B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;aACtD;YACD,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,QAAQ,GAAG,IAAI,CAAC;YACxC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SAClD;IACH,CAAC;IAiBH,4BAAC;AAAD,CAAC,AAhID,IAgIC;AAhIY,sDAAqB","sourcesContent":["import { ISuggestionModel } from './Suggestions.types';\r\n\r\nexport class SuggestionsController<T> {\r\n  public currentIndex: number;\r\n  public currentSuggestion: ISuggestionModel<T> | undefined;\r\n  public suggestions: ISuggestionModel<T>[];\r\n\r\n  constructor() {\r\n    this.suggestions = [];\r\n    this.currentIndex = -1;\r\n  }\r\n\r\n  public updateSuggestions(newSuggestions: T[], selectedIndex?: number): void {\r\n    if (newSuggestions && newSuggestions.length > 0) {\r\n      this.suggestions = this.convertSuggestionsToSuggestionItems(newSuggestions);\r\n      this.currentIndex = selectedIndex ? selectedIndex : 0;\r\n      if (selectedIndex! === -1) {\r\n        this.currentSuggestion = undefined;\r\n      } else if (selectedIndex !== undefined) {\r\n        this.suggestions[selectedIndex].selected = true;\r\n        this.currentSuggestion = this.suggestions[selectedIndex];\r\n      }\r\n    } else {\r\n      this.suggestions = [];\r\n      this.currentIndex = -1;\r\n      this.currentSuggestion = undefined;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Increments the suggestion index and gets the next suggestion in the list.\r\n   */\r\n  public nextSuggestion(): boolean {\r\n    if (this.suggestions && this.suggestions.length) {\r\n      if (this.currentIndex < this.suggestions.length - 1) {\r\n        this.setSelectedSuggestion(this.currentIndex + 1);\r\n        return true;\r\n      } else if (this.currentIndex === this.suggestions.length - 1) {\r\n        this.setSelectedSuggestion(0);\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Decrements the suggestion index and gets the previous suggestion in the list.\r\n   */\r\n  public previousSuggestion(): boolean {\r\n    if (this.suggestions && this.suggestions.length) {\r\n      if (this.currentIndex > 0) {\r\n        this.setSelectedSuggestion(this.currentIndex - 1);\r\n        return true;\r\n      } else if (this.currentIndex === 0) {\r\n        this.setSelectedSuggestion(this.suggestions.length - 1);\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  public getSuggestions(): ISuggestionModel<T>[] {\r\n    return this.suggestions;\r\n  }\r\n\r\n  public getCurrentItem(): ISuggestionModel<T> {\r\n    return this.currentSuggestion!;\r\n  }\r\n\r\n  public getSuggestionAtIndex(index: number): ISuggestionModel<T> {\r\n    return this.suggestions[index];\r\n  }\r\n\r\n  public hasSelectedSuggestion(): boolean {\r\n    return this.currentSuggestion ? true : false;\r\n  }\r\n\r\n  public removeSuggestion(index: number): void {\r\n    this.suggestions.splice(index, 1);\r\n  }\r\n\r\n  public createGenericSuggestion(itemToConvert: ISuggestionModel<T> | T) {\r\n    const itemToAdd = this.convertSuggestionsToSuggestionItems([itemToConvert])[0];\r\n    this.currentSuggestion = itemToAdd;\r\n  }\r\n\r\n  public convertSuggestionsToSuggestionItems(suggestions: Array<ISuggestionModel<T> | T>): ISuggestionModel<T>[] {\r\n    return Array.isArray(suggestions) ? suggestions.map(this._ensureSuggestionModel) : [];\r\n  }\r\n\r\n  public deselectAllSuggestions(): void {\r\n    if (this.currentIndex > -1) {\r\n      this.suggestions[this.currentIndex].selected = false;\r\n      this.currentIndex = -1;\r\n    }\r\n  }\r\n\r\n  public setSelectedSuggestion(index: number): void {\r\n    if (index > this.suggestions.length - 1 || index < 0) {\r\n      this.currentIndex = 0;\r\n      this.currentSuggestion!.selected = false;\r\n      this.currentSuggestion = this.suggestions[0];\r\n      this.currentSuggestion.selected = true;\r\n    } else {\r\n      if (this.currentIndex > -1) {\r\n        this.suggestions[this.currentIndex].selected = false;\r\n      }\r\n      this.suggestions[index].selected = true;\r\n      this.currentIndex = index;\r\n      this.currentSuggestion = this.suggestions[index];\r\n    }\r\n  }\r\n\r\n  private _isSuggestionModel = (value: ISuggestionModel<T> | T): value is ISuggestionModel<T> => {\r\n    return (<ISuggestionModel<T>>value).item !== undefined;\r\n  };\r\n\r\n  private _ensureSuggestionModel = (suggestion: ISuggestionModel<T> | T): ISuggestionModel<T> => {\r\n    if (this._isSuggestionModel(suggestion)) {\r\n      return suggestion as ISuggestionModel<T>;\r\n    } else {\r\n      return {\r\n        item: suggestion,\r\n        selected: false,\r\n        ariaLabel: (<any>suggestion).name || (<any>suggestion).primaryText\r\n      } as ISuggestionModel<T>;\r\n    }\r\n  };\r\n}\r\n"]}