{"version":3,"file":"Calendar.js","sourceRoot":"../src/","sources":["components/Calendar/Calendar.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { ICalendar, ICalendarProps, ICalendarStrings, ICalendarIconStrings, ICalendarFormatDateCallbacks } from './Calendar.types';\r\nimport { DayOfWeek, FirstWeekOfYear, DateRangeType } from '../../utilities/dateValues/DateValues';\r\nimport { CalendarDay, ICalendarDay } from './CalendarDay';\r\nimport { CalendarMonth, ICalendarMonth } from './CalendarMonth';\r\nimport { compareDates, getDateRangeArray } from '../../utilities/dateMath/DateMath';\r\nimport { css, BaseComponent, KeyCodes, getNativeProps, divProperties } from '../../Utilities';\r\nimport * as stylesImport from './Calendar.scss';\r\nconst styles: any = stylesImport;\r\n\r\nconst leftArrow = 'Up';\r\nconst rightArrow = 'Down';\r\nconst closeIcon = 'CalculatorMultiply';\r\nconst iconStrings: ICalendarIconStrings = {\r\n  leftNavigation: leftArrow,\r\n  rightNavigation: rightArrow,\r\n  closeIcon: closeIcon\r\n};\r\nconst defaultWorkWeekDays: DayOfWeek[] = [DayOfWeek.Monday, DayOfWeek.Tuesday, DayOfWeek.Wednesday, DayOfWeek.Thursday, DayOfWeek.Friday];\r\n\r\nconst dateTimeFormatterCallbacks: ICalendarFormatDateCallbacks = {\r\n  formatMonthDayYear: (date: Date, strings: ICalendarStrings) =>\r\n    strings.months[date.getMonth()] + ' ' + date.getDate() + ', ' + date.getFullYear(),\r\n  formatMonthYear: (date: Date, strings: ICalendarStrings) => strings.months[date.getMonth()] + ' ' + date.getFullYear(),\r\n  formatDay: (date: Date) => date.getDate().toString(),\r\n  formatYear: (date: Date) => date.getFullYear().toString()\r\n};\r\n\r\nexport interface ICalendarState {\r\n  /** The currently focused date in the day picker, but not necessarily selected */\r\n  navigatedDayDate?: Date;\r\n\r\n  /** The currently focused date in the month picker, but not necessarily selected */\r\n  navigatedMonthDate?: Date;\r\n\r\n  /** The currently selected date in the calendar */\r\n  selectedDate?: Date;\r\n\r\n  /** State used to show/hide month picker */\r\n  isMonthPickerVisible?: boolean;\r\n\r\n  /** State used to show/hide day picker */\r\n  isDayPickerVisible?: boolean;\r\n}\r\n\r\nexport class Calendar extends BaseComponent<ICalendarProps, ICalendarState> implements ICalendar {\r\n  public static defaultProps: ICalendarProps = {\r\n    onSelectDate: undefined,\r\n    onDismiss: undefined,\r\n    isMonthPickerVisible: true,\r\n    isDayPickerVisible: true,\r\n    showMonthPickerAsOverlay: false,\r\n    value: undefined,\r\n    today: new Date(),\r\n    firstDayOfWeek: DayOfWeek.Sunday,\r\n    dateRangeType: DateRangeType.Day,\r\n    autoNavigateOnSelection: false,\r\n    showGoToToday: true,\r\n    strings: null,\r\n    highlightCurrentMonth: false,\r\n    highlightSelectedMonth: false,\r\n    navigationIcons: iconStrings,\r\n    showWeekNumbers: false,\r\n    firstWeekOfYear: FirstWeekOfYear.FirstDay,\r\n    dateTimeFormatter: dateTimeFormatterCallbacks,\r\n    showSixWeeksByDefault: false,\r\n    workWeekDays: defaultWorkWeekDays,\r\n    showCloseButton: false,\r\n    allFocusable: false\r\n  };\r\n\r\n  private _dayPicker = React.createRef<ICalendarDay>();\r\n  private _monthPicker = React.createRef<ICalendarMonth>();\r\n\r\n  private _focusOnUpdate: boolean;\r\n\r\n  constructor(props: ICalendarProps) {\r\n    super(props);\r\n    const currentDate = props.value && !isNaN(props.value.getTime()) ? props.value : props.today || new Date();\r\n\r\n    this.state = {\r\n      selectedDate: currentDate,\r\n      navigatedDayDate: currentDate,\r\n      navigatedMonthDate: currentDate,\r\n\r\n      /** When showMonthPickerAsOverlay is active it overrides isMonthPickerVisible/isDayPickerVisible props\r\n       (These props permanently set the visibility of their respective calendars). */\r\n      isMonthPickerVisible: this.props.showMonthPickerAsOverlay ? false : this.props.isMonthPickerVisible,\r\n      isDayPickerVisible: this.props.showMonthPickerAsOverlay ? true : this.props.isDayPickerVisible\r\n    };\r\n\r\n    this._focusOnUpdate = false;\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: ICalendarProps): void {\r\n    const { autoNavigateOnSelection, value, today = new Date() } = nextProps;\r\n\r\n    // Make sure auto-navigation is supported for programmatic changes to selected date, i.e.,\r\n    // if selected date is updated via props, we may need to modify the navigated date\r\n    const overrideNavigatedDate = autoNavigateOnSelection && !compareDates(value!, this.props.value!);\r\n    if (overrideNavigatedDate) {\r\n      this.setState({\r\n        navigatedMonthDate: value,\r\n        navigatedDayDate: value\r\n      });\r\n    }\r\n\r\n    this.setState({\r\n      selectedDate: value || today\r\n    });\r\n  }\r\n\r\n  public componentDidUpdate(): void {\r\n    if (this._focusOnUpdate) {\r\n      this.focus();\r\n      this._focusOnUpdate = false;\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const rootClass = 'ms-DatePicker';\r\n    const {\r\n      firstDayOfWeek,\r\n      dateRangeType,\r\n      strings,\r\n      showMonthPickerAsOverlay,\r\n      autoNavigateOnSelection,\r\n      showGoToToday,\r\n      highlightCurrentMonth,\r\n      highlightSelectedMonth,\r\n      navigationIcons,\r\n      minDate,\r\n      maxDate,\r\n      restrictedDates,\r\n      className,\r\n      showCloseButton,\r\n      allFocusable,\r\n      yearPickerHidden,\r\n      today\r\n    } = this.props;\r\n    const nativeProps = getNativeProps(this.props, divProperties, ['value']);\r\n\r\n    const { selectedDate, navigatedDayDate, navigatedMonthDate, isMonthPickerVisible, isDayPickerVisible } = this.state;\r\n    const onHeaderSelect = showMonthPickerAsOverlay ? this._onHeaderSelect : undefined;\r\n    const monthPickerOnly = !showMonthPickerAsOverlay && !isDayPickerVisible;\r\n    const overlayedWithButton = showMonthPickerAsOverlay && showGoToToday;\r\n\r\n    let goTodayEnabled = showGoToToday;\r\n\r\n    if (goTodayEnabled && navigatedDayDate && navigatedMonthDate && today) {\r\n      goTodayEnabled =\r\n        navigatedDayDate.getFullYear() !== today.getFullYear() ||\r\n        navigatedDayDate.getMonth() !== today.getMonth() ||\r\n        navigatedMonthDate.getFullYear() !== today.getFullYear() ||\r\n        navigatedMonthDate.getMonth() !== today.getMonth();\r\n    }\r\n\r\n    return (\r\n      <div className={css(rootClass, styles.root, className)} role=\"application\">\r\n        <div\r\n          {...nativeProps}\r\n          className={css(\r\n            'ms-DatePicker-picker ms-DatePicker-picker--opened ms-DatePicker-picker--focused',\r\n            styles.picker,\r\n            styles.pickerIsOpened,\r\n            styles.pickerIsFocused,\r\n            isMonthPickerVisible && 'ms-DatePicker-monthPickerVisible ' + styles.monthPickerVisible,\r\n            isMonthPickerVisible && isDayPickerVisible && 'ms-DatePicker-calendarsInline ' + styles.calendarsInline,\r\n            monthPickerOnly && 'ms-DatePicker-monthPickerOnly ' + styles.monthPickerOnly,\r\n            showMonthPickerAsOverlay && 'ms-DatePicker-monthPickerAsOverlay ' + styles.monthPickerAsOverlay\r\n          )}\r\n        >\r\n          <div\r\n            className={css('ms-DatePicker-holder ms-slideDownIn10', styles.holder, overlayedWithButton && styles.holderWithButton)}\r\n            onKeyDown={this._onDatePickerPopupKeyDown}\r\n          >\r\n            <div className={css('ms-DatePicker-frame', styles.frame)}>\r\n              <div className={css('ms-DatePicker-wrap', styles.wrap, showGoToToday && styles.goTodaySpacing)}>\r\n                {isDayPickerVisible && (\r\n                  <CalendarDay\r\n                    selectedDate={selectedDate!}\r\n                    navigatedDate={navigatedDayDate!}\r\n                    today={this.props.today}\r\n                    onSelectDate={this._onSelectDate}\r\n                    onNavigateDate={this._onNavigateDayDate}\r\n                    onDismiss={this.props.onDismiss}\r\n                    firstDayOfWeek={firstDayOfWeek!}\r\n                    dateRangeType={dateRangeType!}\r\n                    autoNavigateOnSelection={autoNavigateOnSelection!}\r\n                    strings={strings!}\r\n                    onHeaderSelect={onHeaderSelect}\r\n                    navigationIcons={navigationIcons!}\r\n                    showWeekNumbers={this.props.showWeekNumbers}\r\n                    firstWeekOfYear={this.props.firstWeekOfYear!}\r\n                    dateTimeFormatter={this.props.dateTimeFormatter!}\r\n                    showSixWeeksByDefault={this.props.showSixWeeksByDefault}\r\n                    minDate={minDate}\r\n                    maxDate={maxDate}\r\n                    restrictedDates={restrictedDates}\r\n                    workWeekDays={this.props.workWeekDays}\r\n                    componentRef={this._dayPicker}\r\n                    showCloseButton={showCloseButton}\r\n                    allFocusable={allFocusable}\r\n                  />\r\n                )}\r\n                {isDayPickerVisible && isMonthPickerVisible && <div className={styles.divider} />}\r\n                {isMonthPickerVisible && (\r\n                  <CalendarMonth\r\n                    navigatedDate={navigatedMonthDate!}\r\n                    selectedDate={navigatedDayDate!}\r\n                    strings={strings!}\r\n                    onNavigateDate={this._onNavigateMonthDate}\r\n                    today={this.props.today}\r\n                    highlightCurrentMonth={highlightCurrentMonth!}\r\n                    highlightSelectedMonth={highlightSelectedMonth!}\r\n                    onHeaderSelect={onHeaderSelect}\r\n                    navigationIcons={navigationIcons!}\r\n                    dateTimeFormatter={this.props.dateTimeFormatter!}\r\n                    minDate={minDate}\r\n                    maxDate={maxDate}\r\n                    componentRef={this._monthPicker}\r\n                    yearPickerHidden={yearPickerHidden || showMonthPickerAsOverlay}\r\n                  />\r\n                )}\r\n\r\n                {showGoToToday && (\r\n                  <button\r\n                    role=\"button\"\r\n                    className={css('ms-DatePicker-goToday js-goToday', styles.goToday, {\r\n                      [styles.goTodayInlineMonth]: isMonthPickerVisible,\r\n                      [styles.goToTodayIsDisabled]: !goTodayEnabled\r\n                    })}\r\n                    onClick={this._onGotoTodayClick}\r\n                    onKeyDown={this._onGotoTodayKeyDown}\r\n                    tabIndex={0}\r\n                    disabled={!goTodayEnabled}\r\n                    type=\"button\"\r\n                  >\r\n                    {strings!.goToToday}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public focus() {\r\n    if (this.state.isDayPickerVisible && this._dayPicker.current) {\r\n      this._dayPicker.current.focus();\r\n    } else if (this.state.isMonthPickerVisible && this._monthPicker.current) {\r\n      this._monthPicker.current.focus();\r\n    }\r\n  }\r\n\r\n  private _navigateDayPickerDay = (date: Date): void => {\r\n    this.setState({\r\n      navigatedDayDate: date,\r\n      navigatedMonthDate: date\r\n    });\r\n  };\r\n\r\n  private _navigateMonthPickerDay = (date: Date): void => {\r\n    this.setState({\r\n      navigatedMonthDate: date\r\n    });\r\n  };\r\n\r\n  private _onNavigateDayDate = (date: Date, focusOnNavigatedDay: boolean): void => {\r\n    this._navigateDayPickerDay(date);\r\n    this._focusOnUpdate = focusOnNavigatedDay;\r\n  };\r\n\r\n  private _onNavigateMonthDate = (date: Date, focusOnNavigatedDay: boolean): void => {\r\n    if (!focusOnNavigatedDay) {\r\n      this._navigateMonthPickerDay(date);\r\n      this._focusOnUpdate = focusOnNavigatedDay;\r\n      return;\r\n    }\r\n\r\n    const monthPickerOnly = !this.props.showMonthPickerAsOverlay && !this.props.isDayPickerVisible;\r\n\r\n    if (monthPickerOnly) {\r\n      this._onSelectDate(date);\r\n    }\r\n\r\n    this._navigateDayPickerDay(date);\r\n  };\r\n\r\n  private _onSelectDate = (date: Date, selectedDateRangeArray?: Date[]): void => {\r\n    const { onSelectDate } = this.props;\r\n\r\n    this.setState({\r\n      selectedDate: date\r\n    });\r\n\r\n    if (onSelectDate) {\r\n      onSelectDate(date, selectedDateRangeArray);\r\n    }\r\n  };\r\n\r\n  private _onHeaderSelect = (focus: boolean): void => {\r\n    this.setState({\r\n      isDayPickerVisible: !this.state.isDayPickerVisible,\r\n      isMonthPickerVisible: !this.state.isMonthPickerVisible\r\n    });\r\n\r\n    if (focus) {\r\n      this._focusOnUpdate = true;\r\n    }\r\n  };\r\n\r\n  private _onGotoToday = (): void => {\r\n    const { dateRangeType, firstDayOfWeek, today, workWeekDays, selectDateOnClick } = this.props;\r\n\r\n    if (selectDateOnClick) {\r\n      // When using Defaultprops, TypeScript doesn't know that React is going to inject defaults\r\n      // so we use exclamation mark as a hint to the type checker (see link below)\r\n      // https://decembersoft.com/posts/error-ts2532-optional-react-component-props-in-typescript/\r\n      const dates = getDateRangeArray(today!, dateRangeType!, firstDayOfWeek!, workWeekDays!);\r\n      this._onSelectDate(today!, dates);\r\n    }\r\n\r\n    this._navigateDayPickerDay(today!);\r\n  };\r\n\r\n  private _onGotoTodayClick = (ev: React.MouseEvent<HTMLElement>): void => {\r\n    this._onGotoToday();\r\n  };\r\n\r\n  private _onGotoTodayKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\r\n    if (ev.which === KeyCodes.enter) {\r\n      ev.preventDefault();\r\n      this._onGotoToday();\r\n    }\r\n  };\r\n\r\n  private _onDatePickerPopupKeyDown = (ev: React.KeyboardEvent<HTMLElement>): void => {\r\n    switch (ev.which) {\r\n      case KeyCodes.enter:\r\n        ev.preventDefault();\r\n        break;\r\n\r\n      case KeyCodes.backspace:\r\n        ev.preventDefault();\r\n        break;\r\n\r\n      case KeyCodes.escape:\r\n        this._handleEscKey(ev);\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  private _handleEscKey = (ev: React.KeyboardEvent<HTMLElement>): void => {\r\n    if (this.props.onDismiss) {\r\n      this.props.onDismiss();\r\n    }\r\n  };\r\n}\r\n"]}