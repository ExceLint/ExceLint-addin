{"version":3,"file":"Helpers.js","sourceRoot":"","sources":["../../Bootstrap/Helpers.ts"],"names":[],"mappings":";;AAEA,0BAAiC,OAAyB;IACtD,IAAI,CAAC;QACD,+HAA+H;QAC/H,IAAI,WAAW,SAAQ,CAAC;QACxB,IAAI,CAAC;YACD,YAAY;YACZ,WAAW,GAAI,OAAO,CAAC,OAAe,CAAC,qBAAqB,EAAE,EAAE,KAAK,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9F,CAAC;QAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACT,YAAY;YACZ,WAAW,GAAG,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,mCAAmC,CAAC,CAAC;QACvF,CAAC;QACD,IAAM,cAAc,GAAG,OAAO,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC;QACjE,EAAE,CAAC,CAAC,WAAW,KAAK,cAAc,CAAC,CAAC,CAAC;YACjC,OAAO,CAAC,UAAU,CACd,iHAAiH;gBACjH,WAAW,CACd,CAAC;YACF,MAAM,CAAC,IAAI,CAAC;QAChB,CAAC;QACD,yFAAyF;QACzF,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;IAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACT,mGAAmG;QACnG,MAAM,CAAC,KAAK,CAAC;IACjB,CAAC;AACL,CAAC;AAzBD,4CAyBC","sourcesContent":["import { DiagnosticLogger } from \"./DiagnosticLogger\";\n\nexport function sdkAlreadyExists(_logger: DiagnosticLogger): boolean {\n    try {\n        // appInstance should either resolve to user SDK or crash. If it resolves to attach SDK, user probably modified their NODE_PATH\n        let appInstance: string;\n        try {\n            // Node 8.9+\n            appInstance = (require.resolve as any)(\"applicationinsights\", { paths: [process.cwd()] });\n        } catch (e) {\n            // Node <8.9\n            appInstance = require.resolve(process.cwd() + \"/node_modules/applicationinsights\");\n        }\n        const attachInstance = require.resolve(\"../applicationinsights\");\n        if (appInstance !== attachInstance) {\n            _logger.logMessage(\n                \"applicationinsights module is already installed in this application; not re-attaching. Installed SDK location: \" +\n                appInstance\n            );\n            return true;\n        }\n        // User probably modified their NODE_PATH to resolve to this instance. Attach appinsights\n        return false;\n    } catch (e) {\n        // crashed while trying to resolve \"applicationinsights\", so SDK does not exist. Attach appinsights\n        return false;\n    }\n}\n"]}